!function(){"use strict";try{if("undefined"!=typeof document){var e=document.createElement("style");e.appendChild(document.createTextNode(".command.svelte-1bq7axd{padding:8px 12px}.command.svelte-1bq7axd:hover{cursor:pointer;background-color:#0003;color:var(--b3-theme-primary)}.command-selected.svelte-1bq7axd{color:var(--b3-theme-primary);background-color:#0003}.command-plugin.svelte-1bq7axd{font-size:14px}.command-shortcut.svelte-1bq7axd{font-size:12px;color:var(--color-text-3)}")),document.head.appendChild(e)}}catch(o){console.error("vite-plugin-css-injected-by-js",o)}}();
"use strict";var t,e,n,r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function o(){}function i(t){return t()}function s(){return Object.create(null)}function a(t){t.forEach(i)}function c(t){return"function"==typeof t}function u(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t){return null==t?"":t}function h(t,e){t.appendChild(e)}function f(t,e,n){t.insertBefore(e,n||null)}function p(t){t.parentNode&&t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function g(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function y(t){return document.createTextNode(t)}function m(){return y(" ")}function v(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function w(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function E(t,e){t.value=null==e?"":e}function _(t,e,n,r){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}let A;function S(t){A=t}function T(t){(function(){if(!A)throw new Error("Function called outside component initialization");return A})().$$.on_mount.push(t)}n=e||(e={}),function(t){var e="object"==typeof r?r:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),o=i(n);function i(t,e){return function(n,r){"function"!=typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:r}),e&&e(n,r)}}void 0===e.Reflect?e.Reflect=n:o=i(e.Reflect,o),function(t){var e=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",i="function"==typeof Object.create,s={__proto__:[]}instanceof Array,a=!i&&!s,c={create:i?function(){return ot(Object.create(null))}:s?function(){return ot({__proto__:null})}:function(){return ot({})},has:a?function(t,n){return e.call(t,n)}:function(t,e){return e in t},get:a?function(t,n){return e.call(t,n)?t[n]:void 0}:function(t,e){return t[e]}},u=Object.getPrototypeOf(Function),l="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,h=l||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?et():Map,f=l||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?nt():Set,p=new(l||"function"!=typeof WeakMap?rt():WeakMap);function d(t,e,n,r){if($(n)){if(!V(t))throw new TypeError;if(!W(e))throw new TypeError;return S(t,e)}if(!V(t))throw new TypeError;if(!F(e))throw new TypeError;if(!F(r)&&!$(r)&&!D(r))throw new TypeError;return D(r)&&(r=void 0),T(t,e,n=q(n),r)}function g(t,e){function n(n,r){if(!F(n))throw new TypeError;if(!$(r)&&!H(r))throw new TypeError;L(t,e,n,r)}return n}function y(t,e,n,r){if(!F(n))throw new TypeError;return $(r)||(r=q(r)),L(t,e,n,r)}function m(t,e,n){if(!F(e))throw new TypeError;return $(n)||(n=q(n)),R(t,e,n)}function v(t,e,n){if(!F(e))throw new TypeError;return $(n)||(n=q(n)),I(t,e,n)}function w(t,e,n){if(!F(e))throw new TypeError;return $(n)||(n=q(n)),N(t,e,n)}function b(t,e,n){if(!F(e))throw new TypeError;return $(n)||(n=q(n)),k(t,e,n)}function E(t,e){if(!F(t))throw new TypeError;return $(e)||(e=q(e)),x(t,e)}function _(t,e){if(!F(t))throw new TypeError;return $(e)||(e=q(e)),C(t,e)}function A(t,e,n){if(!F(e))throw new TypeError;$(n)||(n=q(n));var r=O(e,n,!1);if($(r))return!1;if(!r.delete(t))return!1;if(r.size>0)return!0;var o=p.get(e);return o.delete(n),o.size>0||p.delete(e),!0}function S(t,e){for(var n=t.length-1;n>=0;--n){var r=(0,t[n])(e);if(!$(r)&&!D(r)){if(!W(r))throw new TypeError;e=r}}return e}function T(t,e,n,r){for(var o=t.length-1;o>=0;--o){var i=(0,t[o])(e,n,r);if(!$(i)&&!D(i)){if(!F(i))throw new TypeError;r=i}}return r}function O(t,e,n){var r=p.get(t);if($(r)){if(!n)return;r=new h,p.set(t,r)}var o=r.get(e);if($(o)){if(!n)return;o=new h,r.set(e,o)}return o}function R(t,e,n){if(I(t,e,n))return!0;var r=tt(e);return!D(r)&&R(t,r,n)}function I(t,e,n){var r=O(e,n,!1);return!$(r)&&U(r.has(t))}function N(t,e,n){if(I(t,e,n))return k(t,e,n);var r=tt(e);return D(r)?void 0:N(t,r,n)}function k(t,e,n){var r=O(e,n,!1);if(!$(r))return r.get(t)}function L(t,e,n,r){O(n,r,!0).set(t,e)}function x(t,e){var n=C(t,e),r=tt(t);if(null===r)return n;var o=x(r,e);if(o.length<=0)return n;if(n.length<=0)return o;for(var i=new f,s=[],a=0,c=n;a<c.length;a++){var u=c[a];i.has(u)||(i.add(u),s.push(u))}for(var l=0,h=o;l<h.length;l++)u=h[l],i.has(u)||(i.add(u),s.push(u));return s}function C(t,e){var n=[],r=O(t,e,!1);if($(r))return n;for(var o=J(r.keys()),i=0;;){var s=Z(o);if(!s)return n.length=i,n;var a=Y(s);try{n[i]=a}catch(z){try{Q(o)}finally{throw z}}i++}}function P(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function $(t){return void 0===t}function D(t){return null===t}function j(t){return"symbol"==typeof t}function F(t){return"object"==typeof t?null!==t:"function"==typeof t}function M(t,e){switch(P(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var n=3===e?"string":5===e?"number":"default",o=X(t,r);if(void 0!==o){var i=o.call(t,n);if(F(i))throw new TypeError;return i}return B(t,"default"===n?"number":n)}function B(t,e){if("string"===e){var n=t.toString;if(K(n)&&!F(o=n.call(t)))return o;if(K(r=t.valueOf)&&!F(o=r.call(t)))return o}else{var r;if(K(r=t.valueOf)&&!F(o=r.call(t)))return o;var o,i=t.toString;if(K(i)&&!F(o=i.call(t)))return o}throw new TypeError}function U(t){return!!t}function G(t){return""+t}function q(t){var e=M(t,3);return j(e)?e:G(e)}function V(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function K(t){return"function"==typeof t}function W(t){return"function"==typeof t}function H(t){switch(P(t)){case 3:case 4:return!0;default:return!1}}function X(t,e){var n=t[e];if(null!=n){if(!K(n))throw new TypeError;return n}}function J(t){var e=X(t,o);if(!K(e))throw new TypeError;var n=e.call(t);if(!F(n))throw new TypeError;return n}function Y(t){return t.value}function Z(t){var e=t.next();return!e.done&&e}function Q(t){var e=t.return;e&&e.call(t)}function tt(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===u)return e;if(e!==u)return e;var n=t.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return e;var o=r.constructor;return"function"!=typeof o||o===t?e:o}function et(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[o]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype.delete=function(e){var n=this._find(e,!1);if(n>=0){for(var r=this._keys.length,o=n+1;o<r;o++)this._keys[o-1]=this._keys[o],this._values[o-1]=this._values[o];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,r)},e.prototype.values=function(){return new n(this._keys,this._values,i)},e.prototype.entries=function(){return new n(this._keys,this._values,s)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[o]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function r(t,e){return t}function i(t,e){return e}function s(t,e){return[t,e]}}function nt(){return function(){function t(){this._map=new h}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[o]=function(){return this.keys()},t}()}function rt(){var t=16,n=c.create(),r=o();return function(){function t(){this._key=o()}return t.prototype.has=function(t){var e=i(t,!1);return void 0!==e&&c.has(e,this._key)},t.prototype.get=function(t){var e=i(t,!1);return void 0!==e?c.get(e,this._key):void 0},t.prototype.set=function(t,e){return i(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=i(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=o()},t}();function o(){var t;do{t="@@WeakMap@@"+u()}while(c.has(n,t));return n[t]=!0,t}function i(t,n){if(!e.call(t,r)){if(!n)return;Object.defineProperty(t,r,{value:c.create()})}return t[r]}function s(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function a(t){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):s(new Uint8Array(t),t):s(new Array(t),t)}function u(){var e=a(t);e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",r=0;r<t;++r){var o=e[r];4!==r&&6!==r&&8!==r||(n+="-"),o<16&&(n+="0"),n+=o.toString(16).toLowerCase()}return n}}function ot(t){return t.__=void 0,delete t.__,t}t("decorate",d),t("metadata",g),t("defineMetadata",y),t("hasMetadata",m),t("hasOwnMetadata",v),t("getMetadata",w),t("getOwnMetadata",b),t("getMetadataKeys",E),t("getOwnMetadataKeys",_),t("deleteMetadata",A)}(o)}();const O=[],R=[],I=[],N=[],k=Promise.resolve();let L=!1;function x(t){I.push(t)}const C=new Set;let P=0;function $(){if(0!==P)return;const t=A;do{try{for(;P<O.length;){const t=O[P];P++,S(t),D(t.$$)}}catch(z){throw O.length=0,P=0,z}for(S(null),O.length=0,P=0;R.length;)R.pop()();for(let t=0;t<I.length;t+=1){const e=I[t];C.has(e)||(C.add(e),e())}I.length=0}while(O.length);for(;N.length;)N.pop()();L=!1,C.clear(),S(t)}function D(t){if(null!==t.fragment){t.update(),a(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(x)}}const j=new Set;function F(t,e){-1===t.$$.dirty[0]&&(O.push(t),L||(L=!0,k.then($)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function M(t,e,n,r,u,l,h,f=[-1]){const d=A;S(t);const g=t.$$={fragment:null,ctx:[],props:l,update:o,not_equal:u,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:s(),dirty:f,skip_bound:!1,root:e.target||d.$$.root};h&&h(g.root);let y=!1;if(g.ctx=n?n(t,e.props||{},((e,n,...r)=>{const o=r.length?r[0]:n;return g.ctx&&u(g.ctx[e],g.ctx[e]=o)&&(!g.skip_bound&&g.bound[e]&&g.bound[e](o),y&&F(t,e)),n})):[],g.update(),y=!0,a(g.before_update),g.fragment=!!r&&r(g.ctx),e.target){if(e.hydrate){const t=(w=e.target,Array.from(w.childNodes));g.fragment&&g.fragment.l(t),t.forEach(p)}else g.fragment&&g.fragment.c();e.intro&&((m=t.$$.fragment)&&m.i&&(j.delete(m),m.i(v))),function(t,e,n,r){const{fragment:o,after_update:s}=t.$$;o&&o.m(e,n),r||x((()=>{const e=t.$$.on_mount.map(i).filter(c);t.$$.on_destroy?t.$$.on_destroy.push(...e):a(e),t.$$.on_mount=[]})),s.forEach(x)}(t,e.target,e.anchor,e.customElement),$()}var m,v,w;S(d)}class B{$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(a(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=o}$on(t,e){if(!c(e))return o;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const U=()=>({token:window.siyuan.config.api.token}),G="EventBus",q="Shortcut",V="CommandManager";var K,z,W,H=Object.defineProperty,X=(t,e,n)=>(((t,e,n)=>{e in t?H(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!=typeof e?e+"":e,n),n),J=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Y={},Z={get exports(){return Y},set exports(t){Y=t}};z=J,W=function(){var t=function(){},e="undefined",n=typeof window!==e&&typeof window.navigator!==e&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"];function o(t,e){var n=t[e];if("function"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch{return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function i(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function s(e,n){for(var o=0;o<r.length;o++){var i=r[o];this[i]=o<e?t:this.methodFactory(i,e,n)}this.log=this.debug}function a(t,n,r){return function(){typeof console!==e&&(s.call(this,n,r),this[t].apply(this,arguments))}}function c(r,s,c){return function(r){return"debug"===r&&(r="log"),typeof console!==e&&("trace"===r&&n?i:void 0!==console[r]?o(console,r):void 0!==console.log?o(console,"log"):t)}(r)||a.apply(this,arguments)}function u(t,n,o){var i,a=this;n=n??"WARN";var u="loglevel";function l(){var t;if(typeof window!==e&&u){try{t=window.localStorage[u]}catch{}if(typeof t===e)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(u)+"=");-1!==r&&(t=/^([^;]+)/.exec(n.slice(r))[1])}catch{}return void 0===a.levels[t]&&(t=void 0),t}}"string"==typeof t?u+=":"+t:"symbol"==typeof t&&(u=void 0),a.name=t,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=o||c,a.getLevel=function(){return i},a.setLevel=function(n,o){if("string"==typeof n&&void 0!==a.levels[n.toUpperCase()]&&(n=a.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(i=n,!1!==o&&function(t){var n=(r[t]||"silent").toUpperCase();if(typeof window!==e&&u){try{return void(window.localStorage[u]=n)}catch{}try{window.document.cookie=encodeURIComponent(u)+"="+n+";"}catch{}}}(n),s.call(a,n,t),typeof console===e&&n<a.levels.SILENT)return"No console available for logging"},a.setDefaultLevel=function(t){n=t,l()||a.setLevel(t,!1)},a.resetLevel=function(){a.setLevel(n,!1),function(){if(typeof window!==e&&u){try{return void window.localStorage.removeItem(u)}catch{}try{window.document.cookie=encodeURIComponent(u)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}()},a.enableAll=function(t){a.setLevel(a.levels.TRACE,t)},a.disableAll=function(t){a.setLevel(a.levels.SILENT,t)};var h=l();null==h&&(h=n),a.setLevel(h,!1)}var l=new u,h={};l.getLogger=function(t){if("symbol"!=typeof t&&"string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=h[t];return e||(e=h[t]=new u(t,l.getLevel(),l.methodFactory)),e};var f=typeof window!==e?window.log:void 0;return l.noConflict=function(){return typeof window!==e&&window.log===l&&(window.log=f),l},l.getLoggers=function(){return h},l.default=l,l},(K=Z).exports?K.exports=W():z.log=W();var Q={},tt={get exports(){return Q},set exports(t){Q=t}};!function(t){!function(e,n){t.exports?t.exports=n():e.prefix=n(e)}(J,(function(t){var e,n,r={template:"[%t] %l:",levelFormatter:function(t){return t.toUpperCase()},nameFormatter:function(t){return t||"root"},timestampFormatter:function(t){return t.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1")},format:void 0},o={},i={reg:function(t){if(!t||!t.getLogger)throw new TypeError("Argument is not a root logger");e=t},apply:function(t,n){if(!t||!t.setLevel)throw new TypeError("Argument is not a logger");var i=t.methodFactory,s=t.name||"",a=o[s]||o[""]||r;return o[s]||(t.methodFactory=function(t,e,n){var r=i(t,e,n),a=o[n]||o[""],c=-1!==a.template.indexOf("%t"),u=-1!==a.template.indexOf("%l"),l=-1!==a.template.indexOf("%n");return function(){for(var e="",i=arguments.length,h=Array(i),f=0;f<i;f++)h[f]=arguments[f];if(s||!o[n]){var p=a.timestampFormatter(new Date),d=a.levelFormatter(t),g=a.nameFormatter(n);a.format?e+=a.format(d,g,p):(e+=a.template,c&&(e=e.replace(/%t/,p)),u&&(e=e.replace(/%l/,d)),l&&(e=e.replace(/%n/,g))),h.length&&"string"==typeof h[0]?h[0]=e+" "+h[0]:h.unshift(e)}r.apply(void 0,h)}}),(n=n||{}).template&&(n.format=void 0),o[s]=function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(e in arguments[n])Object.prototype.hasOwnProperty.call(arguments[n],e)&&(t[e]=arguments[n][e]);return t}({},a,n),t.setLevel(t.getLevel()),e||t.warn("It is necessary to call the function reg() of loglevel-plugin-prefix before calling apply. From the next release, it will throw an error. See more: https://github.com/kutuluk/loglevel-plugin-prefix/blob/master/README.md"),t}};return t&&(n=t.prefix,i.noConflict=function(){return t.prefix===i&&(t.prefix=n),i}),i}))}(tt);class et{}X(et,"LOG_LEVEL_KEY","VITE_LOG_LEVEL"),X(et,"LOG_PREFIX_KEY","VITE_LOG_PREFIX");var nt=(t=>(t.LOG_LEVEL_DEBUG="DEBUG",t.LOG_LEVEL_INFO="INFO",t.LOG_LEVEL_WARN="WARN",t.LOG_LEVEL_ERROR="ERROR",t))(nt||{});class rt{static stringToEnumValue(t,e){return t[Object.keys(t).filter((n=>t[n].toString()===e))[0]]}static getEnvLevel(t){if(!t)return;const e=t.getEnvOrDefault(et.LOG_LEVEL_KEY,nt.LOG_LEVEL_INFO),n=rt.stringToEnumValue(nt,e.toUpperCase());return n||console.warn("[zhi-log] LOG_LEVEL is invalid in you .env file.Must be either debug, info, warn or error, fallback to default info level"),n}static getEnvLogger(t){if(t)return t.getEnv(et.LOG_PREFIX_KEY)}}class ot{constructor(t,e,n){let r;X(this,"consoleLogger","console"),X(this,"stackSize",1),X(this,"getLogger",(t=>{let e;if(t)e=t;else{const t=this.getCallStack(),n=[],r=[];for(let e=0;e<t.length;e++){const r=t[e],o=r.getFileName()??"none";if(e>this.stackSize-1)break;const i=o+"-"+r.getLineNumber()+":"+r.getColumnNumber();n.push(i)}r.length>0&&(e=n.join(" -> "))}return(!e||0===e.trim().length)&&(e=this.consoleLogger),Y.getLogger(e)})),this.stackSize=1,r=t||rt.getEnvLevel(n),r=r??nt.LOG_LEVEL_INFO,Y.setLevel(r);const o=t=>t.toString(),i=t=>t.toString(),s=t=>t.toString(),a=t=>t.toString();Q.reg(Y),Q.apply(Y,{format(t,r,c){const u=["["+(e??rt.getEnvLogger(n)??"zhi")+"]"];switch(u.push(o("[")+i(c).toString()+o("]")),t){case nt.LOG_LEVEL_DEBUG:u.push(o(t.toUpperCase().toString()));break;case nt.LOG_LEVEL_INFO:u.push(i(t.toUpperCase().toString()));break;case nt.LOG_LEVEL_WARN:u.push(s(t.toUpperCase().toString()));break;case nt.LOG_LEVEL_ERROR:u.push(a(t.toUpperCase().toString()))}return u.push(i(r).toString()),u.push(o(":")),u.join(" ")}})}setStackSize(t){this.stackSize=t??1}getCallStack(){let t;try{t=function(){const t=Error.prepareStackTrace;Error.prepareStackTrace=(t,e)=>e;const e=(new Error).stack.slice(1);return Error.prepareStackTrace=t,e}()}catch{t=[]}return t}}class it{constructor(t,e,n){X(this,"logger"),this.logger=new ot(t,e,n)}getLogger(t,e){return this.logger.setStackSize(e),this.logger.getLogger(t)}}class st extends it{constructor(t,e,n){super(t,e,n)}getLogger(t,e){return super.getLogger(t,e)}}class at{static defaultLogger(t,e){return at.customLogFactory(void 0,void 0,t).getLogger(void 0,e)}static customLogFactory(t,e,n){return new st(t,e,n)}static customSignLogFactory(t,e){return new st(void 0,t,e)}}var ct={},ut={get exports(){return ct},set exports(t){ct=t}};var lt={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16};var ht="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};!function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:n}=lt,r=ht,o=(e=t.exports={}).re=[],i=e.src=[],s=e.t={};let a=0;const c=(t,e,n)=>{const c=a++;r(t,c,e),s[t]=c,i[c]=e,o[c]=new RegExp(e,n?"g":void 0)};c("NUMERICIDENTIFIER","0|[1-9]\\d*"),c("NUMERICIDENTIFIERLOOSE","[0-9]+"),c("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),c("MAINVERSION",`(${i[s.NUMERICIDENTIFIER]})\\.(${i[s.NUMERICIDENTIFIER]})\\.(${i[s.NUMERICIDENTIFIER]})`),c("MAINVERSIONLOOSE",`(${i[s.NUMERICIDENTIFIERLOOSE]})\\.(${i[s.NUMERICIDENTIFIERLOOSE]})\\.(${i[s.NUMERICIDENTIFIERLOOSE]})`),c("PRERELEASEIDENTIFIER",`(?:${i[s.NUMERICIDENTIFIER]}|${i[s.NONNUMERICIDENTIFIER]})`),c("PRERELEASEIDENTIFIERLOOSE",`(?:${i[s.NUMERICIDENTIFIERLOOSE]}|${i[s.NONNUMERICIDENTIFIER]})`),c("PRERELEASE",`(?:-(${i[s.PRERELEASEIDENTIFIER]}(?:\\.${i[s.PRERELEASEIDENTIFIER]})*))`),c("PRERELEASELOOSE",`(?:-?(${i[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${i[s.PRERELEASEIDENTIFIERLOOSE]})*))`),c("BUILDIDENTIFIER","[0-9A-Za-z-]+"),c("BUILD",`(?:\\+(${i[s.BUILDIDENTIFIER]}(?:\\.${i[s.BUILDIDENTIFIER]})*))`),c("FULLPLAIN",`v?${i[s.MAINVERSION]}${i[s.PRERELEASE]}?${i[s.BUILD]}?`),c("FULL",`^${i[s.FULLPLAIN]}$`),c("LOOSEPLAIN",`[v=\\s]*${i[s.MAINVERSIONLOOSE]}${i[s.PRERELEASELOOSE]}?${i[s.BUILD]}?`),c("LOOSE",`^${i[s.LOOSEPLAIN]}$`),c("GTLT","((?:<|>)?=?)"),c("XRANGEIDENTIFIERLOOSE",`${i[s.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),c("XRANGEIDENTIFIER",`${i[s.NUMERICIDENTIFIER]}|x|X|\\*`),c("XRANGEPLAIN",`[v=\\s]*(${i[s.XRANGEIDENTIFIER]})(?:\\.(${i[s.XRANGEIDENTIFIER]})(?:\\.(${i[s.XRANGEIDENTIFIER]})(?:${i[s.PRERELEASE]})?${i[s.BUILD]}?)?)?`),c("XRANGEPLAINLOOSE",`[v=\\s]*(${i[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${i[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${i[s.XRANGEIDENTIFIERLOOSE]})(?:${i[s.PRERELEASELOOSE]})?${i[s.BUILD]}?)?)?`),c("XRANGE",`^${i[s.GTLT]}\\s*${i[s.XRANGEPLAIN]}$`),c("XRANGELOOSE",`^${i[s.GTLT]}\\s*${i[s.XRANGEPLAINLOOSE]}$`),c("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),c("COERCERTL",i[s.COERCE],!0),c("LONETILDE","(?:~>?)"),c("TILDETRIM",`(\\s*)${i[s.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",c("TILDE",`^${i[s.LONETILDE]}${i[s.XRANGEPLAIN]}$`),c("TILDELOOSE",`^${i[s.LONETILDE]}${i[s.XRANGEPLAINLOOSE]}$`),c("LONECARET","(?:\\^)"),c("CARETTRIM",`(\\s*)${i[s.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",c("CARET",`^${i[s.LONECARET]}${i[s.XRANGEPLAIN]}$`),c("CARETLOOSE",`^${i[s.LONECARET]}${i[s.XRANGEPLAINLOOSE]}$`),c("COMPARATORLOOSE",`^${i[s.GTLT]}\\s*(${i[s.LOOSEPLAIN]})$|^$`),c("COMPARATOR",`^${i[s.GTLT]}\\s*(${i[s.FULLPLAIN]})$|^$`),c("COMPARATORTRIM",`(\\s*)${i[s.GTLT]}\\s*(${i[s.LOOSEPLAIN]}|${i[s.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",c("HYPHENRANGE",`^\\s*(${i[s.XRANGEPLAIN]})\\s+-\\s+(${i[s.XRANGEPLAIN]})\\s*$`),c("HYPHENRANGELOOSE",`^\\s*(${i[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${i[s.XRANGEPLAINLOOSE]})\\s*$`),c("STAR","(<|>)?=?\\s*\\*"),c("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),c("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(ut,ct);const ft=["includePrerelease","loose","rtl"];var pt=t=>t?"object"!=typeof t?{loose:!0}:ft.filter((e=>t[e])).reduce(((t,e)=>(t[e]=!0,t)),{}):{};const dt=/^[0-9]+$/,gt=(t,e)=>{const n=dt.test(t),r=dt.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1};var yt={compareIdentifiers:gt,rcompareIdentifiers:(t,e)=>gt(e,t)};const mt=ht,{MAX_LENGTH:vt,MAX_SAFE_INTEGER:wt}=lt,{re:bt,t:Et}=ct,_t=pt,{compareIdentifiers:At}=yt;var St=class t{constructor(e,n){if(n=_t(n),e instanceof t){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>vt)throw new TypeError(`version is longer than ${vt} characters`);mt("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=e.trim().match(n.loose?bt[Et.LOOSE]:bt[Et.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>wt||this.major<0)throw new TypeError("Invalid major version");if(this.minor>wt||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>wt||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((t=>{if(/^[0-9]+$/.test(t)){const e=+t;if(e>=0&&e<wt)return e}return t})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(mt("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if("string"==typeof e&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),At(this.major,e.major)||At(this.minor,e.minor)||At(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{const t=this.prerelease[n],r=e.prerelease[n];if(mt("prerelease compare",n,t,r),void 0===t&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===t)return-1;if(t!==r)return At(t,r)}while(++n)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let n=0;do{const t=this.build[n],r=e.build[n];if(mt("prerelease compare",n,t,r),void 0===t&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===t)return-1;if(t!==r)return At(t,r)}while(++n)}inc(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",e),this.inc("pre",e);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let t=this.prerelease.length;for(;--t>=0;)"number"==typeof this.prerelease[t]&&(this.prerelease[t]++,t=-2);-1===t&&this.prerelease.push(0)}e&&(0===At(this.prerelease[0],e)?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error(`invalid increment argument: ${t}`)}return this.format(),this.raw=this.version,this}};const{MAX_LENGTH:Tt}=lt,{re:Ot,t:Rt}=ct;const It=St;var Nt=(t,e,n)=>new It(t,n).compare(new It(e,n));const kt=Nt;var Lt=(t,e,n)=>0===kt(t,e,n);const xt=Nt;var Ct=(t,e,n)=>xt(t,e,n)>0;const Pt=Nt;var $t=(t,e,n)=>Pt(t,e,n)<0;const Dt=Nt;var jt=(t,e,n)=>0!==Dt(t,e,n);const Ft=Nt;var Mt=(t,e,n)=>Ft(t,e,n)>=0;const Bt=Nt;var Ut=(t,e,n)=>Bt(t,e,n)<=0;const Gt=Lt,qt=jt,Vt=Ct,Kt=Mt,zt=$t,Wt=Ut;var Ht=(t,e,n,r)=>{switch(e){case"===":return"object"==typeof t&&(t=t.version),"object"==typeof n&&(n=n.version),t===n;case"!==":return"object"==typeof t&&(t=t.version),"object"==typeof n&&(n=n.version),t!==n;case"":case"=":case"==":return Gt(t,n,r);case"!=":return qt(t,n,r);case">":return Vt(t,n,r);case">=":return Kt(t,n,r);case"<":return zt(t,n,r);case"<=":return Wt(t,n,r);default:throw new TypeError(`Invalid operator: ${e}`)}};const{re:Xt,t:Jt}=ct;var Yt,Zt,Qt,te,ee,ne,re,oe,ie,se;function ae(){if(te)return Qt;function t(e){var n=this;if(n instanceof t||(n=new t),n.tail=null,n.head=null,n.length=0,e&&"function"==typeof e.forEach)e.forEach((function(t){n.push(t)}));else if(arguments.length>0)for(var r=0,o=arguments.length;r<o;r++)n.push(arguments[r]);return n}function e(t,e,n){var r=e===t.head?new o(n,null,e,t):new o(n,e,e.next,t);return null===r.next&&(t.tail=r),null===r.prev&&(t.head=r),t.length++,r}function n(t,e){t.tail=new o(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function r(t,e){t.head=new o(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function o(t,e,n,r){if(!(this instanceof o))return new o(t,e,n,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}te=1,Qt=t,t.Node=o,t.create=t,t.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,e},t.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},t.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},t.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)n(this,arguments[t]);return this.length},t.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)r(this,arguments[t]);return this.length},t.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},t.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},t.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,r=0;null!==n;r++)t.call(e,n.value,r,this),n=n.next},t.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,r=this.length-1;null!==n;r--)t.call(e,n.value,r,this),n=n.prev},t.prototype.get=function(t){for(var e=0,n=this.head;null!==n&&e<t;e++)n=n.next;if(e===t&&null!==n)return n.value},t.prototype.getReverse=function(t){for(var e=0,n=this.tail;null!==n&&e<t;e++)n=n.prev;if(e===t&&null!==n)return n.value},t.prototype.map=function(e,n){n=n||this;for(var r=new t,o=this.head;null!==o;)r.push(e.call(n,o.value,this)),o=o.next;return r},t.prototype.mapReverse=function(e,n){n=n||this;for(var r=new t,o=this.tail;null!==o;)r.push(e.call(n,o.value,this)),o=o.prev;return r},t.prototype.reduce=function(t,e){var n,r=this.head;if(arguments.length>1)n=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var o=0;null!==r;o++)n=t(n,r.value,o),r=r.next;return n},t.prototype.reduceReverse=function(t,e){var n,r=this.tail;if(arguments.length>1)n=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var o=this.length-1;null!==r;o--)n=t(n,r.value,o),r=r.prev;return n},t.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;null!==n;e++)t[e]=n.value,n=n.next;return t},t.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;null!==n;e++)t[e]=n.value,n=n.prev;return t},t.prototype.slice=function(e,n){(n=n||this.length)<0&&(n+=this.length),(e=e||0)<0&&(e+=this.length);var r=new t;if(n<e||n<0)return r;e<0&&(e=0),n>this.length&&(n=this.length);for(var o=0,i=this.head;null!==i&&o<e;o++)i=i.next;for(;null!==i&&o<n;o++,i=i.next)r.push(i.value);return r},t.prototype.sliceReverse=function(e,n){(n=n||this.length)<0&&(n+=this.length),(e=e||0)<0&&(e+=this.length);var r=new t;if(n<e||n<0)return r;e<0&&(e=0),n>this.length&&(n=this.length);for(var o=this.length,i=this.tail;null!==i&&o>n;o--)i=i.prev;for(;null!==i&&o>e;o--,i=i.prev)r.push(i.value);return r},t.prototype.splice=function(t,n,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var o=0,i=this.head;null!==i&&o<t;o++)i=i.next;var s=[];for(o=0;i&&o<n;o++)s.push(i.value),i=this.removeNode(i);null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(o=0;o<r.length;o++)i=e(this,i,r[o]);return s},t.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=e,this.tail=t,this};try{(Zt?Yt:(Zt=1,Yt=function(t){t.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}))(t)}catch(i){}return Qt}function ce(){if(oe)return re;oe=1;class t{constructor(e,n){if(n=r(n),e instanceof t)return e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease?e:new t(e.raw,n);if(e instanceof o)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=e,this.set=e.split("||").map((t=>this.parseRange(t.trim()))).filter((t=>t.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){const t=this.set[0];if(this.set=this.set.filter((t=>!f(t[0]))),0===this.set.length)this.set=[t];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&p(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((t=>t.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(t){t=t.trim();const e=`parseRange:${Object.keys(this.options).join(",")}:${t}`,r=n.get(e);if(r)return r;const s=this.options.loose,p=s?a[c.HYPHENRANGELOOSE]:a[c.HYPHENRANGE];t=t.replace(p,T(this.options.includePrerelease)),i("hyphen replace",t),t=t.replace(a[c.COMPARATORTRIM],u),i("comparator trim",t);let d=(t=(t=(t=t.replace(a[c.TILDETRIM],l)).replace(a[c.CARETTRIM],h)).split(/\s+/).join(" ")).split(" ").map((t=>g(t,this.options))).join(" ").split(/\s+/).map((t=>S(t,this.options)));s&&(d=d.filter((t=>(i("loose invalid filter",t,this.options),!!t.match(a[c.COMPARATORLOOSE]))))),i("range list",d);const y=new Map,m=d.map((t=>new o(t,this.options)));for(const n of m){if(f(n))return[n];y.set(n.value,n)}y.size>1&&y.has("")&&y.delete("");const v=[...y.values()];return n.set(e,v),v}intersects(e,n){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some((t=>d(t,n)&&e.set.some((e=>d(e,n)&&t.every((t=>e.every((e=>t.intersects(e,n)))))))))}test(t){if(!t)return!1;if("string"==typeof t)try{t=new s(t,this.options)}catch(e){return!1}for(let n=0;n<this.set.length;n++)if(O(this.set[n],t,this.options))return!0;return!1}}re=t;const e=function(){if(ne)return ee;ne=1;const t=ae(),e=Symbol("max"),n=Symbol("length"),r=Symbol("lengthCalculator"),o=Symbol("allowStale"),i=Symbol("maxAge"),s=Symbol("dispose"),a=Symbol("noDisposeOnSet"),c=Symbol("lruList"),u=Symbol("cache"),l=Symbol("updateAgeOnGet"),h=()=>1,f=(t,e,n)=>{const r=t[u].get(e);if(r){const e=r.value;if(p(t,e)){if(g(t,r),!t[o])return}else n&&(t[l]&&(r.value.now=Date.now()),t[c].unshiftNode(r));return e.value}},p=(t,e)=>{if(!e||!e.maxAge&&!t[i])return!1;const n=Date.now()-e.now;return e.maxAge?n>e.maxAge:t[i]&&n>t[i]},d=t=>{if(t[n]>t[e])for(let r=t[c].tail;t[n]>t[e]&&null!==r;){const e=r.prev;g(t,r),r=e}},g=(t,e)=>{if(e){const r=e.value;t[s]&&t[s](r.key,r.value),t[n]-=r.length,t[u].delete(r.key),t[c].removeNode(e)}};class y{constructor(t,e,n,r,o){this.key=t,this.value=e,this.length=n,this.now=r,this.maxAge=o||0}}const m=(t,e,n,r)=>{let i=n.value;p(t,i)&&(g(t,n),t[o]||(i=void 0)),i&&e.call(r,i.value,i.key,t)};return ee=class{constructor(t){if("number"==typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!=typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[e]=t.max||1/0;const n=t.length||h;if(this[r]="function"!=typeof n?h:n,this[o]=t.stale||!1,t.maxAge&&"number"!=typeof t.maxAge)throw new TypeError("maxAge must be a number");this[i]=t.maxAge||0,this[s]=t.dispose,this[a]=t.noDisposeOnSet||!1,this[l]=t.updateAgeOnGet||!1,this.reset()}set max(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[e]=t||1/0,d(this)}get max(){return this[e]}set allowStale(t){this[o]=!!t}get allowStale(){return this[o]}set maxAge(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[i]=t,d(this)}get maxAge(){return this[i]}set lengthCalculator(t){"function"!=typeof t&&(t=h),t!==this[r]&&(this[r]=t,this[n]=0,this[c].forEach((t=>{t.length=this[r](t.value,t.key),this[n]+=t.length}))),d(this)}get lengthCalculator(){return this[r]}get length(){return this[n]}get itemCount(){return this[c].length}rforEach(t,e){e=e||this;for(let n=this[c].tail;null!==n;){const r=n.prev;m(this,t,n,e),n=r}}forEach(t,e){e=e||this;for(let n=this[c].head;null!==n;){const r=n.next;m(this,t,n,e),n=r}}keys(){return this[c].toArray().map((t=>t.key))}values(){return this[c].toArray().map((t=>t.value))}reset(){this[s]&&this[c]&&this[c].length&&this[c].forEach((t=>this[s](t.key,t.value))),this[u]=new Map,this[c]=new t,this[n]=0}dump(){return this[c].map((t=>!p(this,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)})).toArray().filter((t=>t))}dumpLru(){return this[c]}set(t,o,l){if((l=l||this[i])&&"number"!=typeof l)throw new TypeError("maxAge must be a number");const h=l?Date.now():0,f=this[r](o,t);if(this[u].has(t)){if(f>this[e])return g(this,this[u].get(t)),!1;const r=this[u].get(t).value;return this[s]&&(this[a]||this[s](t,r.value)),r.now=h,r.maxAge=l,r.value=o,this[n]+=f-r.length,r.length=f,this.get(t),d(this),!0}const p=new y(t,o,f,h,l);return p.length>this[e]?(this[s]&&this[s](t,o),!1):(this[n]+=p.length,this[c].unshift(p),this[u].set(t,this[c].head),d(this),!0)}has(t){if(!this[u].has(t))return!1;const e=this[u].get(t).value;return!p(this,e)}get(t){return f(this,t,!0)}peek(t){return f(this,t,!1)}pop(){const t=this[c].tail;return t?(g(this,t),t.value):null}del(t){g(this,this[u].get(t))}load(t){this.reset();const e=Date.now();for(let n=t.length-1;n>=0;n--){const r=t[n],o=r.e||0;if(0===o)this.set(r.k,r.v);else{const t=o-e;t>0&&this.set(r.k,r.v,t)}}}prune(){this[u].forEach(((t,e)=>f(this,e,!1)))}},ee}(),n=new e({max:1e3}),r=pt,o=ue(),i=ht,s=St,{re:a,t:c,comparatorTrimReplace:u,tildeTrimReplace:l,caretTrimReplace:h}=ct,f=t=>"<0.0.0-0"===t.value,p=t=>""===t.value,d=(t,e)=>{let n=!0;const r=t.slice();let o=r.pop();for(;n&&r.length;)n=r.every((t=>o.intersects(t,e))),o=r.pop();return n},g=(t,e)=>(i("comp",t,e),t=w(t,e),i("caret",t),t=m(t,e),i("tildes",t),t=E(t,e),i("xrange",t),t=A(t,e),i("stars",t),t),y=t=>!t||"x"===t.toLowerCase()||"*"===t,m=(t,e)=>t.trim().split(/\s+/).map((t=>v(t,e))).join(" "),v=(t,e)=>{const n=e.loose?a[c.TILDELOOSE]:a[c.TILDE];return t.replace(n,((e,n,r,o,s)=>{let a;return i("tilde",t,e,n,r,o,s),y(n)?a="":y(r)?a=`>=${n}.0.0 <${+n+1}.0.0-0`:y(o)?a=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:s?(i("replaceTilde pr",s),a=`>=${n}.${r}.${o}-${s} <${n}.${+r+1}.0-0`):a=`>=${n}.${r}.${o} <${n}.${+r+1}.0-0`,i("tilde return",a),a}))},w=(t,e)=>t.trim().split(/\s+/).map((t=>b(t,e))).join(" "),b=(t,e)=>{i("caret",t,e);const n=e.loose?a[c.CARETLOOSE]:a[c.CARET],r=e.includePrerelease?"-0":"";return t.replace(n,((e,n,o,s,a)=>{let c;return i("caret",t,e,n,o,s,a),y(n)?c="":y(o)?c=`>=${n}.0.0${r} <${+n+1}.0.0-0`:y(s)?c="0"===n?`>=${n}.${o}.0${r} <${n}.${+o+1}.0-0`:`>=${n}.${o}.0${r} <${+n+1}.0.0-0`:a?(i("replaceCaret pr",a),c="0"===n?"0"===o?`>=${n}.${o}.${s}-${a} <${n}.${o}.${+s+1}-0`:`>=${n}.${o}.${s}-${a} <${n}.${+o+1}.0-0`:`>=${n}.${o}.${s}-${a} <${+n+1}.0.0-0`):(i("no pr"),c="0"===n?"0"===o?`>=${n}.${o}.${s}${r} <${n}.${o}.${+s+1}-0`:`>=${n}.${o}.${s}${r} <${n}.${+o+1}.0-0`:`>=${n}.${o}.${s} <${+n+1}.0.0-0`),i("caret return",c),c}))},E=(t,e)=>(i("replaceXRanges",t,e),t.split(/\s+/).map((t=>_(t,e))).join(" ")),_=(t,e)=>{t=t.trim();const n=e.loose?a[c.XRANGELOOSE]:a[c.XRANGE];return t.replace(n,((n,r,o,s,a,c)=>{i("xRange",t,n,r,o,s,a,c);const u=y(o),l=u||y(s),h=l||y(a),f=h;return"="===r&&f&&(r=""),c=e.includePrerelease?"-0":"",u?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&f?(l&&(s=0),a=0,">"===r?(r=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):"<="===r&&(r="<",l?o=+o+1:s=+s+1),"<"===r&&(c="-0"),n=`${r+o}.${s}.${a}${c}`):l?n=`>=${o}.0.0${c} <${+o+1}.0.0-0`:h&&(n=`>=${o}.${s}.0${c} <${o}.${+s+1}.0-0`),i("xRange return",n),n}))},A=(t,e)=>(i("replaceStars",t,e),t.trim().replace(a[c.STAR],"")),S=(t,e)=>(i("replaceGTE0",t,e),t.trim().replace(a[e.includePrerelease?c.GTE0PRE:c.GTE0],"")),T=t=>(e,n,r,o,i,s,a,c,u,l,h,f,p)=>`${n=y(r)?"":y(o)?`>=${r}.0.0${t?"-0":""}`:y(i)?`>=${r}.${o}.0${t?"-0":""}`:s?`>=${n}`:`>=${n}${t?"-0":""}`} ${c=y(u)?"":y(l)?`<${+u+1}.0.0-0`:y(h)?`<${u}.${+l+1}.0-0`:f?`<=${u}.${l}.${h}-${f}`:t?`<${u}.${l}.${+h+1}-0`:`<=${c}`}`.trim(),O=(t,e,n)=>{for(let r=0;r<t.length;r++)if(!t[r].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(let n=0;n<t.length;n++)if(i(t[n].semver),t[n].semver!==o.ANY&&t[n].semver.prerelease.length>0){const r=t[n].semver;if(r.major===e.major&&r.minor===e.minor&&r.patch===e.patch)return!0}return!1}return!0};return re}function ue(){if(se)return ie;se=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(r,o){if(o=n(o),r instanceof e){if(r.loose===!!o.loose)return r;r=r.value}s("comparator",r,o),this.options=o,this.loose=!!o.loose,this.parse(r),this.semver===t?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(e){const n=this.options.loose?r[o.COMPARATORLOOSE]:r[o.COMPARATOR],i=e.match(n);if(!i)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==i[1]?i[1]:"","="===this.operator&&(this.operator=""),i[2]?this.semver=new a(i[2],this.options.loose):this.semver=t}toString(){return this.value}test(e){if(s("Comparator.test",e,this.options.loose),this.semver===t||e===t)return!0;if("string"==typeof e)try{e=new a(e,this.options)}catch(n){return!1}return i(e,this.operator,this.semver,this.options)}intersects(t,n){if(!(t instanceof e))throw new TypeError("a Comparator is required");if(n&&"object"==typeof n||(n={loose:!!n,includePrerelease:!1}),""===this.operator)return""===this.value||new c(t.value,n).test(this.value);if(""===t.operator)return""===t.value||new c(this.value,n).test(t.semver);const r=!(">="!==this.operator&&">"!==this.operator||">="!==t.operator&&">"!==t.operator),o=!("<="!==this.operator&&"<"!==this.operator||"<="!==t.operator&&"<"!==t.operator),s=this.semver.version===t.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==t.operator&&"<="!==t.operator),u=i(this.semver,"<",t.semver,n)&&(">="===this.operator||">"===this.operator)&&("<="===t.operator||"<"===t.operator),l=i(this.semver,">",t.semver,n)&&("<="===this.operator||"<"===this.operator)&&(">="===t.operator||">"===t.operator);return r||o||s&&a||u||l}}ie=e;const n=pt,{re:r,t:o}=ct,i=Ht,s=ht,a=St,c=ce();return ie}ce();ce();ce();ce();ce();ce();const le=ue(),{ANY:he}=le;ce();ce();ce();const fe=ue(),{ANY:pe}=fe;const de=ct;ue(),ce();de.re,de.src,de.t;const ge={author:"作者",version:"版本",description:"描述",goBack:"返回",url:"地址",readme:"README",loading:"加载中",downloading:"下载中",downloaded:"已下载",download:"下载",upgrade:"升级",nodescription:"无描述内容",safemode:"安全模式",safemodetip:"关闭安全模式允许第三方插件加载",autoupgrade:"自动更新",autoupgradetip:"从固定位置获取版本并更新本地存储的插件系统脚本",store_url:"插件商店地址",store_url_tip:"线上插件系统仓库地址, 默认为",menu_common:"通用配置",menu_list:"插件列表",menu_store:"插件商店",plugin_system:"插件系统",plugin_system_setting:"插件系统设置",reload:"重载",show_plugin_system_config:"显示插件系统配置",reload_window:"重载当前窗口",shortcut:"快捷键",show_command_panel:"显示控制面板",uninstall:"卸载",new_version_widget:"集市发现新版本的插件系统,请前往更新并重载"},ye={author:"Author",version:"Version",description:"Description",goBack:"Go Back",url:"URL",readme:"README",loading:"Loading",downloading:"Downloading",downloaded:"Downloaded",download:"Download",upgrade:"Upgrade",nodescription:"No Description content",safemode:"Safe Mode",safemodetip:"Turn off safe mode to enable third party plugins.",autoupgrade:"Auto Upgrade",autoupgradetip:"Auto upgrade plugin system online.",store_url:"Plugin Store URL",store_url_tip:"Plugin Store URL, default is",menu_common:"Common Setting",menu_list:"Plugins",menu_store:"Store",plugin_system:"Plugin System",plugin_system_setting:"Plugin System Setting",reload:"Reload",show_plugin_system_config:"Show plugin system config",reload_window:"Reload current window",shortcut:"Shortcut",show_command_panel:"Show command panel",uninstall:"Uninstall",new_version_widget:"New version plugin system found in Bazzar, please upgrade and reload."};function me(t,e){return function(){return t.apply(e,arguments)}}const{toString:ve}=Object.prototype,{getPrototypeOf:we}=Object,be=(Ee=Object.create(null),t=>{const e=ve.call(t);return Ee[e]||(Ee[e]=e.slice(8,-1).toLowerCase())});var Ee;const _e=t=>(t=t.toLowerCase(),e=>be(e)===t),Ae=t=>e=>typeof e===t,{isArray:Se}=Array,Te=Ae("undefined");const Oe=_e("ArrayBuffer");const Re=Ae("string"),Ie=Ae("function"),Ne=Ae("number"),ke=t=>null!==t&&"object"==typeof t,Le=t=>{if("object"!==be(t))return!1;const e=we(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in t||Symbol.iterator in t)},xe=_e("Date"),Ce=_e("File"),Pe=_e("Blob"),$e=_e("FileList"),De=_e("URLSearchParams");function je(t,e,{allOwnKeys:n=!1}={}){if(null==t)return;let r,o;if("object"!=typeof t&&(t=[t]),Se(t))for(r=0,o=t.length;r<o;r++)e.call(null,t[r],r,t);else{const o=n?Object.getOwnPropertyNames(t):Object.keys(t),i=o.length;let s;for(r=0;r<i;r++)s=o[r],e.call(null,t[s],s,t)}}function Fe(t,e){e=e.toLowerCase();const n=Object.keys(t);let r,o=n.length;for(;o-- >0;)if(r=n[o],e===r.toLowerCase())return r;return null}const Me="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,Be=t=>!Te(t)&&t!==Me;const Ue=(Ge="undefined"!=typeof Uint8Array&&we(Uint8Array),t=>Ge&&t instanceof Ge);var Ge;const qe=_e("HTMLFormElement"),Ve=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Ke=_e("RegExp"),ze=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};je(n,((n,o)=>{!1!==e(n,o,t)&&(r[o]=n)})),Object.defineProperties(t,r)},We="abcdefghijklmnopqrstuvwxyz",He="0123456789",Xe={DIGIT:He,ALPHA:We,ALPHA_DIGIT:We+We.toUpperCase()+He};const Je={isArray:Se,isArrayBuffer:Oe,isBuffer:function(t){return null!==t&&!Te(t)&&null!==t.constructor&&!Te(t.constructor)&&Ie(t.constructor.isBuffer)&&t.constructor.isBuffer(t)},isFormData:t=>{const e="[object FormData]";return t&&("function"==typeof FormData&&t instanceof FormData||ve.call(t)===e||Ie(t.toString)&&t.toString()===e)},isArrayBufferView:function(t){let e;return e="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&Oe(t.buffer),e},isString:Re,isNumber:Ne,isBoolean:t=>!0===t||!1===t,isObject:ke,isPlainObject:Le,isUndefined:Te,isDate:xe,isFile:Ce,isBlob:Pe,isRegExp:Ke,isFunction:Ie,isStream:t=>ke(t)&&Ie(t.pipe),isURLSearchParams:De,isTypedArray:Ue,isFileList:$e,forEach:je,merge:function t(){const{caseless:e}=Be(this)&&this||{},n={},r=(r,o)=>{const i=e&&Fe(n,o)||o;Le(n[i])&&Le(r)?n[i]=t(n[i],r):Le(r)?n[i]=t({},r):Se(r)?n[i]=r.slice():n[i]=r};for(let o=0,i=arguments.length;o<i;o++)arguments[o]&&je(arguments[o],r);return n},extend:(t,e,n,{allOwnKeys:r}={})=>(je(e,((e,r)=>{n&&Ie(e)?t[r]=me(e,n):t[r]=e}),{allOwnKeys:r}),t),trim:t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),inherits:(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},toFlatObject:(t,e,n,r)=>{let o,i,s;const a={};if(e=e||{},null==t)return e;do{for(o=Object.getOwnPropertyNames(t),i=o.length;i-- >0;)s=o[i],r&&!r(s,t,e)||a[s]||(e[s]=t[s],a[s]=!0);t=!1!==n&&we(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},kindOf:be,kindOfTest:_e,endsWith:(t,e,n)=>{t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return-1!==r&&r===n},toArray:t=>{if(!t)return null;if(Se(t))return t;let e=t.length;if(!Ne(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},forEachEntry:(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let r;for(;(r=n.next())&&!r.done;){const n=r.value;e.call(t,n[0],n[1])}},matchAll:(t,e)=>{let n;const r=[];for(;null!==(n=t.exec(e));)r.push(n);return r},isHTMLForm:qe,hasOwnProperty:Ve,hasOwnProp:Ve,reduceDescriptors:ze,freezeMethods:t=>{ze(t,((e,n)=>{if(Ie(t)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=t[n];Ie(r)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(t,e)=>{const n={},r=t=>{t.forEach((t=>{n[t]=!0}))};return Se(t)?r(t):r(String(t).split(e)),n},toCamelCase:t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(t,e,n){return e.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(t,e)=>(t=+t,Number.isFinite(t)?t:e),findKey:Fe,global:Me,isContextDefined:Be,ALPHABET:Xe,generateString:(t=16,e=Xe.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n},isSpecCompliantForm:function(t){return!!(t&&Ie(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator])},toJSONObject:t=>{const e=new Array(10),n=(t,r)=>{if(ke(t)){if(e.indexOf(t)>=0)return;if(!("toJSON"in t)){e[r]=t;const o=Se(t)?[]:{};return je(t,((t,e)=>{const i=n(t,r+1);!Te(i)&&(o[e]=i)})),e[r]=void 0,o}}return t};return n(t,0)}};function Ye(t,e,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o)}Je.inherits(Ye,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Je.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Ze=Ye.prototype,Qe={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((t=>{Qe[t]={value:t}})),Object.defineProperties(Ye,Qe),Object.defineProperty(Ze,"isAxiosError",{value:!0}),Ye.from=(t,e,n,r,o,i)=>{const s=Object.create(Ze);return Je.toFlatObject(t,s,(function(t){return t!==Error.prototype}),(t=>"isAxiosError"!==t)),Ye.call(s,t.message,e,n,r,o),s.cause=t,s.name=t.name,i&&Object.assign(s,i),s};function tn(t){return Je.isPlainObject(t)||Je.isArray(t)}function en(t){return Je.endsWith(t,"[]")?t.slice(0,-2):t}function nn(t,e,n){return t?t.concat(e).map((function(t,e){return t=en(t),!n&&e?"["+t+"]":t})).join(n?".":""):e}const rn=Je.toFlatObject(Je,{},null,(function(t){return/^is[A-Z]/.test(t)}));function on(t,e,n){if(!Je.isObject(t))throw new TypeError("target must be an object");e=e||new FormData;const r=(n=Je.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(t,e){return!Je.isUndefined(e[t])}))).metaTokens,o=n.visitor||u,i=n.dots,s=n.indexes,a=(n.Blob||"undefined"!=typeof Blob&&Blob)&&Je.isSpecCompliantForm(e);if(!Je.isFunction(o))throw new TypeError("visitor must be a function");function c(t){if(null===t)return"";if(Je.isDate(t))return t.toISOString();if(!a&&Je.isBlob(t))throw new Ye("Blob is not supported. Use a Buffer instead.");return Je.isArrayBuffer(t)||Je.isTypedArray(t)?a&&"function"==typeof Blob?new Blob([t]):Buffer.from(t):t}function u(t,n,o){let a=t;if(t&&!o&&"object"==typeof t)if(Je.endsWith(n,"{}"))n=r?n:n.slice(0,-2),t=JSON.stringify(t);else if(Je.isArray(t)&&function(t){return Je.isArray(t)&&!t.some(tn)}(t)||(Je.isFileList(t)||Je.endsWith(n,"[]"))&&(a=Je.toArray(t)))return n=en(n),a.forEach((function(t,r){!Je.isUndefined(t)&&null!==t&&e.append(!0===s?nn([n],r,i):null===s?n:n+"[]",c(t))})),!1;return!!tn(t)||(e.append(nn(o,n,i),c(t)),!1)}const l=[],h=Object.assign(rn,{defaultVisitor:u,convertValue:c,isVisitable:tn});if(!Je.isObject(t))throw new TypeError("data must be an object");return function t(n,r){if(!Je.isUndefined(n)){if(-1!==l.indexOf(n))throw Error("Circular reference detected in "+r.join("."));l.push(n),Je.forEach(n,(function(n,i){!0===(!(Je.isUndefined(n)||null===n)&&o.call(e,n,Je.isString(i)?i.trim():i,r,h))&&t(n,r?r.concat(i):[i])})),l.pop()}}(t),e}function sn(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,(function(t){return e[t]}))}function an(t,e){this._pairs=[],t&&on(t,this,e)}const cn=an.prototype;function un(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ln(t,e,n){if(!e)return t;const r=n&&n.encode||un,o=n&&n.serialize;let i;if(i=o?o(e,n):Je.isURLSearchParams(e)?e.toString():new an(e,n).toString(r),i){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+i}return t}cn.append=function(t,e){this._pairs.push([t,e])},cn.toString=function(t){const e=t?function(e){return t.call(this,e,sn)}:sn;return this._pairs.map((function(t){return e(t[0])+"="+e(t[1])}),"").join("&")};const hn=class{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Je.forEach(this.handlers,(function(e){null!==e&&t(e)}))}},fn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},pn={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:an,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},isStandardBrowserEnv:(()=>{let t;return("undefined"==typeof navigator||"ReactNative"!==(t=navigator.product)&&"NativeScript"!==t&&"NS"!==t)&&("undefined"!=typeof window&&"undefined"!=typeof document)})(),isStandardBrowserWebWorkerEnv:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};function dn(t){function e(t,n,r,o){let i=t[o++];const s=Number.isFinite(+i),a=o>=t.length;if(i=!i&&Je.isArray(r)?r.length:i,a)return Je.hasOwnProp(r,i)?r[i]=[r[i],n]:r[i]=n,!s;r[i]&&Je.isObject(r[i])||(r[i]=[]);return e(t,n,r[i],o)&&Je.isArray(r[i])&&(r[i]=function(t){const e={},n=Object.keys(t);let r;const o=n.length;let i;for(r=0;r<o;r++)i=n[r],e[i]=t[i];return e}(r[i])),!s}if(Je.isFormData(t)&&Je.isFunction(t.entries)){const n={};return Je.forEachEntry(t,((t,r)=>{e(function(t){return Je.matchAll(/\w+|\[(\w*)]/g,t).map((t=>"[]"===t[0]?"":t[1]||t[0]))}(t),r,n,0)})),n}return null}const gn={"Content-Type":void 0};const yn={transitional:fn,adapter:["xhr","http"],transformRequest:[function(t,e){const n=e.getContentType()||"",r=n.indexOf("application/json")>-1,o=Je.isObject(t);o&&Je.isHTMLForm(t)&&(t=new FormData(t));if(Je.isFormData(t))return r&&r?JSON.stringify(dn(t)):t;if(Je.isArrayBuffer(t)||Je.isBuffer(t)||Je.isStream(t)||Je.isFile(t)||Je.isBlob(t))return t;if(Je.isArrayBufferView(t))return t.buffer;if(Je.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return on(t,new pn.classes.URLSearchParams,Object.assign({visitor:function(t,e,n,r){return pn.isNode&&Je.isBuffer(t)?(this.append(e,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}(t,this.formSerializer).toString();if((i=Je.isFileList(t))||n.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return on(i?{"files[]":t}:t,e&&new e,this.formSerializer)}}return o||r?(e.setContentType("application/json",!1),function(t,e,n){if(Je.isString(t))try{return(e||JSON.parse)(t),Je.trim(t)}catch(z){if("SyntaxError"!==z.name)throw z}return(n||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){const e=this.transitional||yn.transitional,n=e&&e.forcedJSONParsing,r="json"===this.responseType;if(t&&Je.isString(t)&&(n&&!this.responseType||r)){const n=!(e&&e.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(z){if(n){if("SyntaxError"===z.name)throw Ye.from(z,Ye.ERR_BAD_RESPONSE,this,null,this.response);throw z}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pn.classes.FormData,Blob:pn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Je.forEach(["delete","get","head"],(function(t){yn.headers[t]={}})),Je.forEach(["post","put","patch"],(function(t){yn.headers[t]=Je.merge(gn)}));const mn=yn,vn=Je.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),wn=Symbol("internals");function bn(t){return t&&String(t).trim().toLowerCase()}function En(t){return!1===t||null==t?t:Je.isArray(t)?t.map(En):String(t)}function _n(t,e,n,r,o){return Je.isFunction(r)?r.call(this,e,n):(o&&(e=n),Je.isString(e)?Je.isString(r)?-1!==e.indexOf(r):Je.isRegExp(r)?r.test(e):void 0:void 0)}class An{constructor(t){t&&this.set(t)}set(t,e,n){const r=this;function o(t,e,n){const o=bn(e);if(!o)throw new Error("header name must be a non-empty string");const i=Je.findKey(r,o);(!i||void 0===r[i]||!0===n||void 0===n&&!1!==r[i])&&(r[i||e]=En(t))}const i=(t,e)=>Je.forEach(t,((t,n)=>o(t,n,e)));return Je.isPlainObject(t)||t instanceof this.constructor?i(t,e):Je.isString(t)&&(t=t.trim())&&!/^[-_a-zA-Z]+$/.test(t.trim())?i((t=>{const e={};let n,r,o;return t&&t.split("\n").forEach((function(t){o=t.indexOf(":"),n=t.substring(0,o).trim().toLowerCase(),r=t.substring(o+1).trim(),!n||e[n]&&vn[n]||("set-cookie"===n?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)})),e})(t),e):null!=t&&o(e,t,n),this}get(t,e){if(t=bn(t)){const n=Je.findKey(this,t);if(n){const t=this[n];if(!e)return t;if(!0===e)return function(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}(t);if(Je.isFunction(e))return e.call(this,t,n);if(Je.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=bn(t)){const n=Je.findKey(this,t);return!(!n||void 0===this[n]||e&&!_n(0,this[n],n,e))}return!1}delete(t,e){const n=this;let r=!1;function o(t){if(t=bn(t)){const o=Je.findKey(n,t);!o||e&&!_n(0,n[o],o,e)||(delete n[o],r=!0)}}return Je.isArray(t)?t.forEach(o):o(t),r}clear(t){const e=Object.keys(this);let n=e.length,r=!1;for(;n--;){const o=e[n];t&&!_n(0,this[o],o,t,!0)||(delete this[o],r=!0)}return r}normalize(t){const e=this,n={};return Je.forEach(this,((r,o)=>{const i=Je.findKey(n,o);if(i)return e[i]=En(r),void delete e[o];const s=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((t,e,n)=>e.toUpperCase()+n))}(o):String(o).trim();s!==o&&delete e[o],e[s]=En(r),n[s]=!0})),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return Je.forEach(this,((n,r)=>{null!=n&&!1!==n&&(e[r]=t&&Je.isArray(n)?n.join(", "):n)})),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([t,e])=>t+": "+e)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach((t=>n.set(t))),n}static accessor(t){const e=(this[wn]=this[wn]={accessors:{}}).accessors,n=this.prototype;function r(t){const r=bn(t);e[r]||(!function(t,e){const n=Je.toCamelCase(" "+e);["get","set","has"].forEach((r=>{Object.defineProperty(t,r+n,{value:function(t,n,o){return this[r].call(this,e,t,n,o)},configurable:!0})}))}(n,t),e[r]=!0)}return Je.isArray(t)?t.forEach(r):r(t),this}}An.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Je.freezeMethods(An.prototype),Je.freezeMethods(An);const Sn=An;function Tn(t,e){const n=this||mn,r=e||n,o=Sn.from(r.headers);let i=r.data;return Je.forEach(t,(function(t){i=t.call(n,i,o.normalize(),e?e.status:void 0)})),o.normalize(),i}function On(t){return!(!t||!t.__CANCEL__)}function Rn(t,e,n){Ye.call(this,null==t?"canceled":t,Ye.ERR_CANCELED,e,n),this.name="CanceledError"}Je.inherits(Rn,Ye,{__CANCEL__:!0});const In=pn.isStandardBrowserEnv?{write:function(t,e,n,r,o,i){const s=[];s.push(t+"="+encodeURIComponent(e)),Je.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),Je.isString(r)&&s.push("path="+r),Je.isString(o)&&s.push("domain="+o),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function Nn(t,e){return t&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)?function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}const kn=pn.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function r(n){let r=n;return t&&(e.setAttribute("href",r),r=e.href),e.setAttribute("href",r),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return n=r(window.location.href),function(t){const e=Je.isString(t)?r(t):t;return e.protocol===n.protocol&&e.host===n.host}}():function(){return!0};function Ln(t,e){let n=0;const r=function(t,e){t=t||10;const n=new Array(t),r=new Array(t);let o,i=0,s=0;return e=void 0!==e?e:1e3,function(a){const c=Date.now(),u=r[s];o||(o=c),n[i]=a,r[i]=c;let l=s,h=0;for(;l!==i;)h+=n[l++],l%=t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const f=u&&c-u;return f?Math.round(1e3*h/f):void 0}}(50,250);return o=>{const i=o.loaded,s=o.lengthComputable?o.total:void 0,a=i-n,c=r(a);n=i;const u={loaded:i,total:s,progress:s?i/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&i<=s?(s-i)/c:void 0,event:o};u[e?"download":"upload"]=!0,t(u)}}const xn={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(t){return new Promise((function(e,n){let r=t.data;const o=Sn.from(t.headers).normalize(),i=t.responseType;let s;function a(){t.cancelToken&&t.cancelToken.unsubscribe(s),t.signal&&t.signal.removeEventListener("abort",s)}Je.isFormData(r)&&(pn.isStandardBrowserEnv||pn.isStandardBrowserWebWorkerEnv)&&o.setContentType(!1);let c=new XMLHttpRequest;if(t.auth){const e=t.auth.username||"",n=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.set("Authorization","Basic "+btoa(e+":"+n))}const u=Nn(t.baseURL,t.url);function l(){if(!c)return;const r=Sn.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders());!function(t,e,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?e(new Ye("Request failed with status code "+n.status,[Ye.ERR_BAD_REQUEST,Ye.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}((function(t){e(t),a()}),(function(t){n(t),a()}),{data:i&&"text"!==i&&"json"!==i?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:r,config:t,request:c}),c=null}if(c.open(t.method.toUpperCase(),ln(u,t.params,t.paramsSerializer),!0),c.timeout=t.timeout,"onloadend"in c?c.onloadend=l:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(l)},c.onabort=function(){c&&(n(new Ye("Request aborted",Ye.ECONNABORTED,t,c)),c=null)},c.onerror=function(){n(new Ye("Network Error",Ye.ERR_NETWORK,t,c)),c=null},c.ontimeout=function(){let e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const r=t.transitional||fn;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(new Ye(e,r.clarifyTimeoutError?Ye.ETIMEDOUT:Ye.ECONNABORTED,t,c)),c=null},pn.isStandardBrowserEnv){const e=(t.withCredentials||kn(u))&&t.xsrfCookieName&&In.read(t.xsrfCookieName);e&&o.set(t.xsrfHeaderName,e)}void 0===r&&o.setContentType(null),"setRequestHeader"in c&&Je.forEach(o.toJSON(),(function(t,e){c.setRequestHeader(e,t)})),Je.isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),i&&"json"!==i&&(c.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&c.addEventListener("progress",Ln(t.onDownloadProgress,!0)),"function"==typeof t.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",Ln(t.onUploadProgress)),(t.cancelToken||t.signal)&&(s=e=>{c&&(n(!e||e.type?new Rn(null,t,c):e),c.abort(),c=null)},t.cancelToken&&t.cancelToken.subscribe(s),t.signal&&(t.signal.aborted?s():t.signal.addEventListener("abort",s)));const h=function(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(u);h&&-1===pn.protocols.indexOf(h)?n(new Ye("Unsupported protocol "+h+":",Ye.ERR_BAD_REQUEST,t)):c.send(r||null)}))}};Je.forEach(xn,((t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(z){}Object.defineProperty(t,"adapterName",{value:e})}}));const Cn={getAdapter:t=>{t=Je.isArray(t)?t:[t];const{length:e}=t;let n,r;for(let o=0;o<e&&(n=t[o],!(r=Je.isString(n)?xn[n.toLowerCase()]:n));o++);if(!r){if(!1===r)throw new Ye(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT");throw new Error(Je.hasOwnProp(xn,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`)}if(!Je.isFunction(r))throw new TypeError("adapter is not a function");return r},adapters:xn};function Pn(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Rn(null,t)}function $n(t){Pn(t),t.headers=Sn.from(t.headers),t.data=Tn.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1);return Cn.getAdapter(t.adapter||mn.adapter)(t).then((function(e){return Pn(t),e.data=Tn.call(t,t.transformResponse,e),e.headers=Sn.from(e.headers),e}),(function(e){return On(e)||(Pn(t),e&&e.response&&(e.response.data=Tn.call(t,t.transformResponse,e.response),e.response.headers=Sn.from(e.response.headers))),Promise.reject(e)}))}const Dn=t=>t instanceof Sn?t.toJSON():t;function jn(t,e){e=e||{};const n={};function r(t,e,n){return Je.isPlainObject(t)&&Je.isPlainObject(e)?Je.merge.call({caseless:n},t,e):Je.isPlainObject(e)?Je.merge({},e):Je.isArray(e)?e.slice():e}function o(t,e,n){return Je.isUndefined(e)?Je.isUndefined(t)?void 0:r(void 0,t,n):r(t,e,n)}function i(t,e){if(!Je.isUndefined(e))return r(void 0,e)}function s(t,e){return Je.isUndefined(e)?Je.isUndefined(t)?void 0:r(void 0,t):r(void 0,e)}function a(n,o,i){return i in e?r(n,o):i in t?r(void 0,n):void 0}const c={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(t,e)=>o(Dn(t),Dn(e),!0)};return Je.forEach(Object.keys(t).concat(Object.keys(e)),(function(r){const i=c[r]||o,s=i(t[r],e[r],r);Je.isUndefined(s)&&i!==a||(n[r]=s)})),n}const Fn="1.3.4",Mn={};["object","boolean","number","function","string","symbol"].forEach(((t,e)=>{Mn[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}}));const Bn={};Mn.transitional=function(t,e,n){function r(t,e){return"[Axios v"+Fn+"] Transitional option '"+t+"'"+e+(n?". "+n:"")}return(n,o,i)=>{if(!1===t)throw new Ye(r(o," has been removed"+(e?" in "+e:"")),Ye.ERR_DEPRECATED);return e&&!Bn[o]&&(Bn[o]=!0,console.warn(r(o," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,o,i)}};const Un={assertOptions:function(t,e,n){if("object"!=typeof t)throw new Ye("options must be an object",Ye.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let o=r.length;for(;o-- >0;){const i=r[o],s=e[i];if(s){const e=t[i],n=void 0===e||s(e,i,t);if(!0!==n)throw new Ye("option "+i+" must be "+n,Ye.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Ye("Unknown option "+i,Ye.ERR_BAD_OPTION)}},validators:Mn},Gn=Un.validators;class qn{constructor(t){this.defaults=t,this.interceptors={request:new hn,response:new hn}}request(t,e){"string"==typeof t?(e=e||{}).url=t:e=t||{},e=jn(this.defaults,e);const{transitional:n,paramsSerializer:r,headers:o}=e;let i;void 0!==n&&Un.assertOptions(n,{silentJSONParsing:Gn.transitional(Gn.boolean),forcedJSONParsing:Gn.transitional(Gn.boolean),clarifyTimeoutError:Gn.transitional(Gn.boolean)},!1),void 0!==r&&Un.assertOptions(r,{encode:Gn.function,serialize:Gn.function},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase(),i=o&&Je.merge(o.common,o[e.method]),i&&Je.forEach(["delete","get","head","post","put","patch","common"],(t=>{delete o[t]})),e.headers=Sn.concat(i,o);const s=[];let a=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(a=a&&t.synchronous,s.unshift(t.fulfilled,t.rejected))}));const c=[];let u;this.interceptors.response.forEach((function(t){c.push(t.fulfilled,t.rejected)}));let l,h=0;if(!a){const t=[$n.bind(this),void 0];for(t.unshift.apply(t,s),t.push.apply(t,c),l=t.length,u=Promise.resolve(e);h<l;)u=u.then(t[h++],t[h++]);return u}l=s.length;let f=e;for(h=0;h<l;){const t=s[h++],e=s[h++];try{f=t(f)}catch(p){e.call(this,p);break}}try{u=$n.call(this,f)}catch(p){return Promise.reject(p)}for(h=0,l=c.length;h<l;)u=u.then(c[h++],c[h++]);return u}getUri(t){return ln(Nn((t=jn(this.defaults,t)).baseURL,t.url),t.params,t.paramsSerializer)}}Je.forEach(["delete","get","head","options"],(function(t){qn.prototype[t]=function(e,n){return this.request(jn(n||{},{method:t,url:e,data:(n||{}).data}))}})),Je.forEach(["post","put","patch"],(function(t){function e(e){return function(n,r,o){return this.request(jn(o||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}qn.prototype[t]=e(),qn.prototype[t+"Form"]=e(!0)}));const Vn=qn;class Kn{constructor(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise((function(t){e=t}));const n=this;this.promise.then((t=>{if(!n._listeners)return;let e=n._listeners.length;for(;e-- >0;)n._listeners[e](t);n._listeners=null})),this.promise.then=t=>{let e;const r=new Promise((t=>{n.subscribe(t),e=t})).then(t);return r.cancel=function(){n.unsubscribe(e)},r},t((function(t,r,o){n.reason||(n.reason=new Rn(t,r,o),e(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}static source(){let t;return{token:new Kn((function(e){t=e})),cancel:t}}}const zn=Kn;const Wn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Wn).forEach((([t,e])=>{Wn[e]=t}));const Hn=Wn;const Xn=function t(e){const n=new Vn(e),r=me(Vn.prototype.request,n);return Je.extend(r,Vn.prototype,n,{allOwnKeys:!0}),Je.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return t(jn(e,n))},r}(mn);Xn.Axios=Vn,Xn.CanceledError=Rn,Xn.CancelToken=zn,Xn.isCancel=On,Xn.VERSION=Fn,Xn.toFormData=on,Xn.AxiosError=Ye,Xn.Cancel=Xn.CanceledError,Xn.all=function(t){return Promise.all(t)},Xn.spread=function(t){return function(e){return t.apply(null,e)}},Xn.isAxiosError=function(t){return Je.isObject(t)&&!0===t.isAxiosError},Xn.mergeConfig=jn,Xn.AxiosHeaders=Sn,Xn.formToJSON=t=>dn(Je.isHTMLForm(t)?new FormData(t):t),Xn.HttpStatusCode=Hn,Xn.default=Xn;const Jn=Xn,Yn=at.customLogFactory(nt.LOG_LEVEL_INFO,"PluginSystem"),Zn=Yn.getLogger("plugin system"),Qn=(...t)=>{Zn.info(...t)};Jn.create({withCredentials:!1,headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}});const tr=()=>([1e7].toString()+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(t=>(parseInt(t,10)^window.crypto.getRandomValues(new Uint32Array(1))[0]&15>>parseInt(t,10)/4).toString(16)));class er{constructor(t){this.message=t}}const nr={zh_CN:ge,en_US:ye},rr=t=>nr[window.siyuan.config.lang][t]||"not defined";async function or(t,e){let n=null;return await fetch(t,{body:JSON.stringify(e),method:"POST",headers:{Authorization:`Token ${U().token}`}}).then((function(t){n=t.json()})),n}async function ir(t){let e=await t;return 0===e.code?e.data:null}async function sr(t){return ir(or("/api/query/sql",{stmt:t}))}const ar=null==(t=window.theme)?void 0:t.languageMode;async function cr(t=null,e=null,n=7e3){return ir(or("/api/notification/pushMsg",{msg:t?t[ar]||t.other:e,timeout:n}))}async function ur(t=null,e=null,n=7e3){return ir(or("/api/notification/pushErrMsg",{msg:t?t[ar]||t.other:e,timeout:n}))}const lr=Object.freeze(Object.defineProperty({__proto__:null,appendBlock:async function(t,e,n){let r="/api/block/appendBlock";return ir(or(r,n={parentID:t,dataType:e,data:n}))},closeNotebook:async function(t){return ir(or("/api/notebook/closeNotebook",{notebook:t}))},createDocWithMd:async function(t,e,n){return ir(or("/api/filetree/createDocWithMd",{notebook:t,path:e,markdown:n}))},createNotebook:async function(t){return ir(or("/api/notebook/createNotebook",{name:t}))},deleteBlock:async function(t){return ir(or("/api/block/deleteBlock",{id:t}))},docSaveAsTemplate:async function(t,e=!1){return ir(or("/api/template/docSaveAsTemplate",{id:t,overwrite:e}))},exportMdContent:async function(t){return ir(or("/api/export/exportMdContent",{id:t}))},getAnchor:async function(t,e){let n=`select * from blocks where id = '${t=t.replace("((","").replace("))","")}'`,r=await sr(n),o="";if(r)try{o=r[0][e]?r[0][e]:r[0].content?r[0].content:t}catch(z){o="解析错误"}return o},getBacklink:async function(t){return ir(or("/api/ref/getBacklink",{id:t,beforeLen:10,k:"",mk:""}))},getBazzarWidget:async function(){return ir(or("/api/bazaar/getBazaarWidget",null))},getBlockAttrs:async function(t){return ir(or("/api/attr/getBlockAttrs",{id:t}))},getBlockBreadcrumb:async function(t){return ir(or("/api/block/getBlockBreadcrumb",{id:t}))},getBlockByID:async function(t){let e=`select * from blocks where id ='${t}'`;return(await sr(e))[0]},getBlockKramdown:async function(t){return ir(or("/api/block/getBlockKramdown",{id:t}))},getDoc:async function(t){return ir(or("/api/filetree/getDoc",{id:t,k:"",mode:2,size:36}))},getDocOutline:async function(t){return ir(or("/api/outline/getDocOutline",{id:t}))},getFile:async function(t,e="text"){const n=await fetch("/api/file/getFile",{method:"POST",headers:{Authorization:`Token ${U().token}`},body:JSON.stringify({path:t})});if(200===n.status){if("text"===e)return await n.text();if("json"===e)return(await n.json()).data}return null},getFocusedDoc:async function(t){return ir(or("/api/filetree/getDoc",{id:t,k:"",mode:0,size:36}))},getGraph:async function(t,e,n){return ir(or("/api/graph/getGraph",{k:t,conf:e,reqId:n}))},getHPathByID:async function(t){return ir(or("/api/filetree/getHPathByID",{id:t}))},getHPathByPath:async function(t,e){return ir(or("/api/filetree/getHPathByPath",{Notebook:t,Path:e}))},getLocalGraph:async function(t,e,n,r){return ir(or("/api/graph/getLocalGraph",{id:e,k:t,conf:n,reqId:r}))},getLocalStorage:async function(){return ir(or("/api/storage/getLocalStorage",null))},getNotebookConf:async function(t){return ir(or("/api/notebook/getNotebookConf",{notebook:t}))},getSysFonts:async function(){return ir(or("/api/system/getSysFonts",null))},getTag:async function(){return ir(or("/api/tag/getTag",{}))},insertBlock:async function(t,e,n){let r="/api/block/insertBlock";return ir(or(r,n={previousID:t,dataType:e,data:n}))},listDocsByPath:async function(t){return ir(or("/api/filetree/listDocsByPath",{path:t}))},lsNotebooks:async function(t){return ir(or("/api/notebook/lsNotebooks",{stmt:t}))},moveBlock:async function(t,e,n){return ir(or("/api/block/moveBlock",{id:t,previousID:e,parentID:n}))},moveDoc:async function(t,e,n,r){return ir(or("/api/filetree/moveDoc",{fromNotebook:t,fromPath:e,toNotebook:n,toPath:r}))},openNotebook:async function(t){return ir(or("/api/notebook/openNotebook",{notebook:t}))},parseBody:ir,prependBlock:async function(t,e,n){let r="/api/block/prependBlock";return ir(or(r,n={parentID:t,dataType:e,data:n}))},pushErrMsg:ur,pushMsg:cr,putFile:async function(t,e,n=!1,r=Date.now()){let o=new Blob([e]),i=new File([o],t.split("/").pop()),s=new FormData;s.append("path",t),s.append("file",i),s.append("isDir",String(n)),s.append("modTime",String(r));const a=await fetch("/api/file/putFile",{body:s,method:"POST",headers:{Authorization:`Token ${U().token}`}});return 200===a.status?await a.json():null},readDir:async function(t){const e=await fetch("/api/file/readDir",{method:"POST",headers:{Authorization:`Token ${U().token}`},body:JSON.stringify({path:t})});return 200===e.status?(await e.json()).data:null},removeDoc:async function(t,e){return ir(or("/api/filetree/removeDoc",{notebook:t,path:e}))},removeFile:async function(t){return 200===(await fetch("/api/file/removeFile",{method:"POST",headers:{Authorization:`Token ${U().token}`},body:JSON.stringify({path:t})})).status?void 0:null},removeNotebook:async function(t){return ir(or("/api/notebook/removeNotebook",{notebook:t}))},renameDoc:async function(t,e,n){return ir(or("/api/filetree/renameDoc",{notebook:t,path:e,title:n}))},renameNotebook:async function(t,e){return ir(or("/api/notebook/renameNotebook",{notebook:t,name:e}))},render:async function(t){return ir(or("/api/template/render",t))},renderSprig:async function(t){return ir(or("/api/template/renderSprig",{template:t}))},request:or,searchBlock:async function(t){return ir(or("/api/search/searchBlock",{query:t}))},searchDocs:async function(t){return ir(or("/api/filetree/searchDocs",{k:t}))},searchEmbedBlock:async function(t,e){return ir(or("/api/search/searchEmbedBlock",{stmt:e,excludeIDs:t}))},searchTemplate:async function(t){return ir(or("/api/search/searchTemplate",{k:t}))},setBlockAttrs:async function(t,e){return ir(or("/api/attr/setBlockAttrs",{id:t,attrs:e}))},setNotebookConf:async function(t){return ir(or("/api/notebook/setNotebookConf",{notebook:t}))},setStorageVal:async function(t,e){return ir(or("/api/storage/setLocalStorageVal",{app:tr(),key:t,val:e}))},sql:sr,transactions:async function(t,e=[]){const n=new URL(t.ws.ws.url);return ir(or("/api/transactions",{app:n.searchParams.get("app"),session:n.searchParams.get("id"),transactions:e}))},updateBlock:async function(t,e,n){let r="/api/block/updateBlock";return ir(or(r,n={id:t,dataType:e,data:n}))}},Symbol.toStringTag,{value:"Module"}));const hr=Object.freeze(Object.defineProperty({__proto__:null,addToolbarLeft:function(t){var e;const n=null==(e=document.getElementById("toolbar"))?void 0:e.getElementsByClassName("fn__ellipsis");n&&function(t,e){t.insertAdjacentElement("beforebegin",e)}(n[0],t)},addToolbarRight:function(t){var e;const n=null==(e=document.getElementById("toolbar"))?void 0:e.getElementsByClassName("fn__ellipsis");n&&function(t,e){t.insertAdjacentElement("afterend",e)}(n[0],t)},createLogger:t=>(t=>Yn.getLogger(t))(t)},Symbol.toStringTag,{value:"Module"}));class fr{constructor(t){if(this.element=document.createElement("button"),t.disabled&&this.element.setAttribute("disabled","disabled"),"separator"===t.type)return void this.element.classList.add("b3-menu__separator");this.element.classList.add("b3-menu__item"),t.current&&this.element.classList.add("b3-menu__item--selected"),t.click&&this.element.addEventListener("click",(e=>{this.element.getAttribute("disabled")||(t.click(this.element),e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),window.siyuan.menus.menu.remove())}));let e=`<span class="b3-menu__label">${t.label}</span>`;if(e=t.iconHTML?t.iconHTML+e:`<svg class="b3-menu__icon${["HTML (SiYuan)",window.siyuan.languages.template].includes(t.label)?" ft__error":""}" style="${"iconClose"===t.icon?"height:10px;":""}"><use xlink:href="#${t.icon||""}"></use></svg>${e}`,t.action&&(e+=`<svg class="b3-menu__action"><use xlink:href="#${t.action}"></use></svg>`),t.id&&this.element.setAttribute("data-id",t.id),"readonly"===t.type&&this.element.classList.add("b3-menu__item--readonly"),this.element.innerHTML=e,t.bind&&(this.element.classList.add("b3-menu__item--custom"),t.bind(this.element)),t.submenu){const e=document.createElement("div");e.classList.add("b3-menu__submenu"),t.submenu.forEach((t=>{e.append(new fr(t).element)})),this.element.insertAdjacentHTML("beforeend",'<svg class="b3-menu__icon b3-menu__icon--arrow"><use xlink:href="#iconRight"></use></svg>'),this.element.append(e)}}}class pr{constructor(t){this.disableClose=t.disableClose,this.id=tr(),window.siyuan.dialogs.push(this),this.destroyCallback=t.destroyCallback,this.element=document.createElement("div"),this.element.innerHTML=`<div class="b3-dialog">\n<div class="b3-dialog__scrim"${t.transparent?'style="background-color:transparent"':""}></div>\n<div class="b3-dialog__container" style="width:${t.width||"auto"}">\n  <svg class="b3-dialog__close fn__a${this.disableClose?" fn__none":""}"><use xlink:href="#iconClose"></use></svg>\n  <div class="b3-dialog__header${t.title?"":" fn__none"}" onselectstart="return false;">${t.title||""}</div>\n  <div style="height:${t.height||"auto"}">${t.content}</div>\n</div></div>`,this.element.querySelector(".b3-dialog__scrim").addEventListener("click",(t=>{this.disableClose||this.destroy(),t.preventDefault(),t.stopPropagation(),window.siyuan.menus.menu.remove()})),this.disableClose||this.element.querySelector(".b3-dialog__close").addEventListener("click",(t=>{this.destroy(),t.preventDefault(),t.stopPropagation()})),document.body.append(this.element),t.disableAnimation?this.element.classList.add("b3-dialog--open"):setTimeout((()=>{this.element.classList.add("b3-dialog--open")})),window.siyuan.menus.menu.remove()}static destroyAll(){window.siyuan.dialogs.forEach((t=>t.destroy()))}destroy(){this.element.remove(),window.siyuan.menus.menu.remove(),this.destroyCallback&&this.destroyCallback(),window.siyuan.dialogs.find(((t,e)=>{if(t.id===this.id)return window.siyuan.dialogs.splice(e,1),!0}))}bindInput(t,e){t.focus(),t.addEventListener("keydown",(t=>{if(!t.isComposing)return"Escape"===t.key?(this.destroy(),t.preventDefault(),void t.stopPropagation()):void("Enter"===t.key&&e&&(e(),t.preventDefault()));t.preventDefault()}))}}var dr="named",gr="name",yr="unmanaged",mr="optional",vr="inject",wr="multi_inject",br="inversify:tagged",Er="inversify:tagged_props",_r="inversify:paramtypes",Ar="design:paramtypes",Sr="post_construct",Tr="pre_destroy";var Or=[vr,wr,gr,yr,dr,mr],Rr={Request:"Request",Singleton:"Singleton",Transient:"Transient"},Ir={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},Nr={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"},kr=0;function Lr(){return kr++}var xr=function(){function t(t,e){this.id=Lr(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=Ir.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.onDeactivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=e.scope===Rr.Singleton&&this.activated,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.onDeactivation=this.onDeactivation,e.cache=this.cache,e},t}(),Cr="Cannot apply @injectable decorator multiple times.",Pr="Metadata key was used more than once in a parameter:",$r="NULL argument",Dr="Key Not Found",jr="Ambiguous match found for serviceIdentifier:",Fr="No matching bindings found for serviceIdentifier:",Mr="Missing required @injectable annotation in:",Br="Missing required @inject or @multiInject annotation in:",Ur=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},Gr="Circular dependency found:",qr="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",Vr=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."},Kr="Invalid Container constructor argument. Container options must be an object.",zr="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",Wr="Invalid Container option. Auto bind injectable must be a boolean",Hr="Invalid Container option. Skip base check must be a boolean",Xr=function(t,e){return"@postConstruct error in class "+t+": "+e},Jr=function(t,e){return"@preDestroy error in class "+t+": "+e},Yr=function(t,e){return"onDeactivation() error in class "+t+": "+e},Zr="Maximum call stack size exceeded",Qr=function(){function t(){}return t.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(_r,t),userGeneratedMetadata:Reflect.getMetadata(br,t)||{}}},t.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata(Er,t)||[]},t}(),to={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};function eo(t){return t instanceof RangeError||t.message===Zr}function no(t){return"function"==typeof t?t.name:"symbol"==typeof t?t.toString():t}function ro(t,e,n){var r="",o=n(t,e);return 0!==o.length&&(r="\nRegistered bindings:",o.forEach((function(t){var e="Object";null!==t.implementationType&&(e=so(t.implementationType)),r=r+"\n "+e,t.constraint.metaData&&(r=r+" - "+t.constraint.metaData)}))),r}function oo(t,e){return null!==t.parentRequest&&(t.parentRequest.serviceIdentifier===e||oo(t.parentRequest,e))}function io(t){t.childRequests.forEach((function(t){if(oo(t,t.serviceIdentifier)){var e=function(t){var e=function t(e,n){void 0===n&&(n=[]);var r=no(e.serviceIdentifier);return n.push(r),null!==e.parentRequest?t(e.parentRequest,n):n}(t);return e.reverse().join(" --\x3e ")}(t);throw new Error(Gr+" "+e)}io(t)}))}function so(t){if(t.name)return t.name;var e=t.toString(),n=e.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+e}var ao=function(){function t(t){this.id=Lr(),this.container=t}return t.prototype.addPlan=function(t){this.plan=t},t.prototype.setCurrentRequest=function(t){this.currentRequest=t},t}(),co=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.toString=function(){return this.key===dr?"named: "+String(this.value).toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+String(this.value)+" }"},t}(),uo=function(t,e){this.parentContext=t,this.rootRequest=e},lo=function(){function t(t){this._cb=t}return t.prototype.unwrap=function(){return this._cb()},t}(),ho=function(){function t(t){this.str=t}return t.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},t.prototype.endsWith=function(t){var e,n=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},n)},t.prototype.contains=function(t){return-1!==this.str.indexOf(t)},t.prototype.equals=function(t){return this.str===t},t.prototype.value=function(){return this.str},t}(),fo=function(){function t(t,e,n,r){this.id=Lr(),this.type=t,this.serviceIdentifier=n;var o="symbol"==typeof e?e.toString().slice(7,-1):e;this.name=new ho(o||""),this.identifier=e,this.metadata=new Array;var i=null;"string"==typeof r?i=new co(dr,r):r instanceof co&&(i=r),null!==i&&this.metadata.push(i)}return t.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++){if(n[e].key===t)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(wr)},t.prototype.matchesArray=function(t){return this.matchesTag(wr)(t)},t.prototype.isNamed=function(){return this.hasTag(dr)},t.prototype.isTagged=function(){return this.metadata.some((function(t){return Or.every((function(e){return t.key!==e}))}))},t.prototype.isOptional=function(){return this.matchesTag(mr)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(t){return t.key===dr}))[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(t){return Or.every((function(e){return t.key!==e}))})):null},t.prototype.matchesNamedTag=function(t){return this.matchesTag(dr)(t)},t.prototype.matchesTag=function(t){var e=this;return function(n){for(var r=0,o=e.metadata;r<o.length;r++){var i=o[r];if(i.key===t&&i.value===n)return!0}return!1}},t}(),po=globalThis&&globalThis.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};function go(t,e,n,r){var o=t.getConstructorMetadata(n),i=o.compilerGeneratedMetadata;if(void 0===i)throw new Error(Mr+" "+e+".");var s=o.userGeneratedMetadata,a=Object.keys(s),c=0===n.length&&a.length>0,u=a.length>n.length,l=function(t,e,n,r,o){for(var i=[],s=0;s<o;s++){var a=yo(s,t,e,n,r);null!==a&&i.push(a)}return i}(r,e,i,s,c||u?a.length:n.length),h=vo(t,n,e);return po(po([],l,!0),h,!0)}function yo(t,e,n,r,o){var i=o[t.toString()]||[],s=bo(i),a=!0!==s.unmanaged,c=r[t],u=s.inject||s.multiInject;if((c=u||c)instanceof lo&&(c=c.unwrap()),a){if(!e&&(c===Object||c===Function||void 0===c))throw new Error(Br+" argument "+t+" in class "+n+".");var l=new fo(Nr.ConstructorArgument,s.targetName,c);return l.metadata=i,l}return null}function mo(t,e,n,r){var o=t||e;if(void 0===o){var i=Mr+" for property "+String(n)+" in class "+r+".";throw new Error(i)}return o}function vo(t,e,n){for(var r=t.getPropertiesMetadata(e),o=[],i=Object.getOwnPropertySymbols(r),s=0,a=Object.keys(r).concat(i);s<a.length;s++){var c=a[s],u=r[c],l=bo(u),h=l.targetName||c,f=mo(l.inject,l.multiInject,c,n),p=new fo(Nr.ClassProperty,h,f);p.metadata=u,o.push(p)}var d=Object.getPrototypeOf(e.prototype).constructor;if(d!==Object){var g=vo(t,d,n);o=po(po([],o,!0),g,!0)}return o}function wo(t,e){var n=Object.getPrototypeOf(e.prototype).constructor;if(n!==Object){var r=go(t,so(n),n,!0),o=r.map((function(t){return t.metadata.filter((function(t){return t.key===yr}))})),i=[].concat.apply([],o).length,s=r.length-i;return s>0?s:wo(t,n)}return 0}function bo(t){var e={};return t.forEach((function(t){e[t.key.toString()]=t.value})),{inject:e[vr],multiInject:e[wr],targetName:e[gr],unmanaged:e[yr]}}var Eo=function(){function t(t,e,n,r,o){this.id=Lr(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(r)?r:[r],this.requestScope=null===n?new Map:null}return t.prototype.addChildRequest=function(e,n,r){var o=new t(e,this.parentContext,this,n,r);return this.childRequests.push(o),o},t}();function _o(t){return t._bindingDictionary}function Ao(t,e,n,r,o){var i=To(n.container,o.serviceIdentifier),s=[];return i.length===to.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof o.serviceIdentifier&&t.getConstructorMetadata(o.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(o.serviceIdentifier).toSelf(),i=To(n.container,o.serviceIdentifier)),s=e?i:i.filter((function(t){var e=new Eo(t.serviceIdentifier,n,r,t,o);return t.constraint(e)})),function(t,e,n,r){switch(e.length){case to.NoBindingsAvailable:if(n.isOptional())return e;var o=no(t),i=Fr;throw i+=function(t,e){if(e.isTagged()||e.isNamed()){var n="",r=e.getNamedTag(),o=e.getCustomTags();return null!==r&&(n+=r.toString()+"\n"),null!==o&&o.forEach((function(t){n+=t.toString()+"\n"}))," "+t+"\n "+t+" - "+n}return" "+t}(o,n),i+=ro(r,o,To),new Error(i);case to.OnlyOneBindingAvailable:return e;case to.MultipleBindingsAvailable:default:if(n.isArray())return e;o=no(t),i=jr+" "+o;throw i+=ro(r,o,To),new Error(i)}}(o.serviceIdentifier,s,o,n.container),s}function So(t,e,n,r,o,i){var s,a;if(null===o){s=Ao(t,e,r,null,i),a=new Eo(n,r,null,s,i);var c=new uo(r,a);r.addPlan(c)}else s=Ao(t,e,r,o,i),a=o.addChildRequest(i.serviceIdentifier,s,i);s.forEach((function(e){var n=null;if(i.isArray())n=a.addChildRequest(e.serviceIdentifier,e,i);else{if(e.cache)return;n=a}if(e.type===Ir.Instance&&null!==e.implementationType){var o=function(t,e){return go(t,so(e),e,!1)}(t,e.implementationType);if(!r.container.options.skipBaseClassChecks){var s=wo(t,e.implementationType);if(o.length<s){var c=Vr(so(e.implementationType));throw new Error(c)}}o.forEach((function(e){So(t,!1,e.serviceIdentifier,r,n,e)}))}}))}function To(t,e){var n=[],r=_o(t);return r.hasKey(e)?n=r.get(e):null!==t.parent&&(n=To(t.parent,e)),n}function Oo(t,e,n,r,o,i,s,a){void 0===a&&(a=!1);var c=new ao(e),u=function(t,e,n,r,o,i){var s=new co(t?wr:vr,n),a=new fo(e,r,n,s);if(void 0!==o){var c=new co(o,i);a.metadata.push(c)}return a}(n,r,o,"",i,s);try{return So(t,a,o,c,null,u),c}catch(l){throw eo(l)&&io(c.plan.rootRequest),l}}function Ro(t){return("object"==typeof t&&null!==t||"function"==typeof t)&&"function"==typeof t.then}function Io(t){return!!Ro(t)||Array.isArray(t)&&t.some(Ro)}var No,ko,Lo=globalThis&&globalThis.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(z){i(z)}}function a(t){try{c(r.throw(t))}catch(z){i(z)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},xo=globalThis&&globalThis.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(z){i=[6,z],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},Co=function(t,e,n){t.has(e.id)||t.set(e.id,n)},Po=function(t,e){t.cache=e,t.activated=!0,Ro(e)&&$o(t,e)},$o=function(t,e){return Lo(void 0,void 0,void 0,(function(){var n,r;return xo(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,e];case 1:return n=o.sent(),t.cache=n,[3,3];case 2:throw r=o.sent(),t.cache=null,t.activated=!1,r;case 3:return[2]}}))}))};(ko=No||(No={})).DynamicValue="toDynamicValue",ko.Factory="toFactory",ko.Provider="toProvider";var Do=globalThis&&globalThis.__assign||function(){return Do=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Do.apply(this,arguments)},jo=globalThis&&globalThis.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(z){i(z)}}function a(t){try{c(r.throw(t))}catch(z){i(z)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},Fo=globalThis&&globalThis.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(z){i=[6,z],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},Mo=globalThis&&globalThis.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};function Bo(t,e,n){var r;if(e.length>0){var o=function(t,e){return t.reduce((function(t,n){var r=e(n);return n.target.type===Nr.ConstructorArgument?t.constructorInjections.push(r):(t.propertyRequests.push(n),t.propertyInjections.push(r)),t.isAsync||(t.isAsync=Io(r)),t}),{constructorInjections:[],propertyInjections:[],propertyRequests:[],isAsync:!1})}(e,n),i=Do(Do({},o),{constr:t});r=o.isAsync?function(t){return jo(this,void 0,void 0,(function(){var e,n;return Fo(this,(function(r){switch(r.label){case 0:return[4,Go(t.constructorInjections)];case 1:return e=r.sent(),[4,Go(t.propertyInjections)];case 2:return n=r.sent(),[2,Uo(Do(Do({},t),{constructorInjections:e,propertyInjections:n}))]}}))}))}(i):Uo(i)}else r=new t;return r}function Uo(t){var e,n=new((e=t.constr).bind.apply(e,Mo([void 0],t.constructorInjections,!1)));return t.propertyRequests.forEach((function(e,r){var o=e.target.identifier,i=t.propertyInjections[r];n[o]=i})),n}function Go(t){return jo(this,void 0,void 0,(function(){var e,n,r,o;return Fo(this,(function(i){for(e=[],n=0,r=t;n<r.length;n++)o=r[n],Array.isArray(o)?e.push(Promise.all(o)):e.push(o);return[2,Promise.all(e)]}))}))}function qo(t,e){var n=function(t,e){var n,r;if(Reflect.hasMetadata(Sr,t)){var o=Reflect.getMetadata(Sr,t);try{return null===(r=(n=e)[o.value])||void 0===r?void 0:r.call(n)}catch(z){throw new Error(Xr(t.name,z.message))}}}(t,e);return Ro(n)?n.then((function(){return e})):e}function Vo(t,e){t.scope!==Rr.Singleton&&function(t,e){var n="Class cannot be instantiated in "+(t.scope===Rr.Request?"request":"transient")+" scope.";if("function"==typeof t.onDeactivation)throw new Error(Yr(e.name,n));if(Reflect.hasMetadata(Tr,e))throw new Error(Jr(e.name,n))}(t,e)}var Ko=globalThis&&globalThis.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(z){i(z)}}function a(t){try{c(r.throw(t))}catch(z){i(z)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},zo=globalThis&&globalThis.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(z){i=[6,z],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},Wo=function(t){return function(e){e.parentContext.setCurrentRequest(e);var n=e.bindings,r=e.childRequests,o=e.target&&e.target.isArray(),i=!(e.parentRequest&&e.parentRequest.target&&e.target&&e.parentRequest.target.matchesArray(e.target.serviceIdentifier));if(o&&i)return r.map((function(e){return Wo(t)(e)}));if(!e.target.isOptional()||0!==n.length){var s=n[0];return Yo(t,e,s)}}},Ho=function(t,e){var n=function(t){switch(t.type){case Ir.Factory:return{factory:t.factory,factoryType:No.Factory};case Ir.Provider:return{factory:t.provider,factoryType:No.Provider};case Ir.DynamicValue:return{factory:t.dynamicValue,factoryType:No.DynamicValue};default:throw new Error("Unexpected factory type "+t.type)}}(t);return function(t,e){try{return t()}catch(n){throw eo(n)&&(n=e()),n}}((function(){return n.factory.bind(t)(e)}),(function(){return new Error((t=n.factoryType,r=e.currentRequest.serviceIdentifier.toString(),"It looks like there is a circular dependency in one of the '"+t+"' bindings. Please investigate bindings withservice identifier '"+r+"'."));var t,r}))},Xo=function(t,e,n){var r,o=e.childRequests;switch(function(t){var e=null;switch(t.type){case Ir.ConstantValue:case Ir.Function:e=t.cache;break;case Ir.Constructor:case Ir.Instance:e=t.implementationType;break;case Ir.DynamicValue:e=t.dynamicValue;break;case Ir.Provider:e=t.provider;break;case Ir.Factory:e=t.factory}if(null===e){var n=no(t.serviceIdentifier);throw new Error("Invalid binding type: "+n)}}(n),n.type){case Ir.ConstantValue:case Ir.Function:r=n.cache;break;case Ir.Constructor:r=n.implementationType;break;case Ir.Instance:r=function(t,e,n,r){Vo(t,e);var o=Bo(e,n,r);return Ro(o)?o.then((function(t){return qo(e,t)})):qo(e,o)}(n,n.implementationType,o,Wo(t));break;default:r=Ho(n,e.parentContext)}return r},Jo=function(t,e,n){var r=function(t,e){return e.scope===Rr.Singleton&&e.activated?e.cache:e.scope===Rr.Request&&t.has(e.id)?t.get(e.id):null}(t,e);return null!==r||function(t,e,n){e.scope===Rr.Singleton&&Po(e,n),e.scope===Rr.Request&&Co(t,e,n)}(t,e,r=n()),r},Yo=function(t,e,n){return Jo(t,n,(function(){var r=Xo(t,e,n);return r=Ro(r)?r.then((function(t){return Zo(e,n,t)})):Zo(e,n,r)}))};function Zo(t,e,n){var r,o=Qo(t.parentContext,e,n),i=ri(t.parentContext.container),s=i.next();do{r=s.value;var a=t.parentContext,c=t.serviceIdentifier,u=ni(r,c);o=Ro(o)?ei(u,a,o):ti(u,a,o),s=i.next()}while(!0!==s.done&&!_o(r).hasKey(t.serviceIdentifier));return o}var Qo=function(t,e,n){return"function"==typeof e.onActivation?e.onActivation(t,n):n},ti=function(t,e,n){for(var r=t.next();!r.done;){if(Ro(n=r.value(e,n)))return ei(t,e,n);r=t.next()}return n},ei=function(t,e,n){return Ko(void 0,void 0,void 0,(function(){var r,o;return zo(this,(function(i){switch(i.label){case 0:return[4,n];case 1:r=i.sent(),o=t.next(),i.label=2;case 2:return o.done?[3,4]:[4,o.value(e,r)];case 3:return r=i.sent(),o=t.next(),[3,2];case 4:return[2,r]}}))}))},ni=function(t,e){var n=t._activations;return n.hasKey(e)?n.get(e).values():[].values()},ri=function(t){for(var e=[t],n=t.parent;null!==n;)e.push(n),n=n.parent;return{next:function(){var t=e.pop();return void 0!==t?{done:!1,value:t}:{done:!0,value:void 0}}}};var oi=function(t,e){var n=t.parentRequest;return null!==n&&(!!e(n)||oi(n,e))},ii=function(t){return function(e){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(t)(e)};return n.metaData=new co(t,e),n}},si=ii(dr),ai=function(t){return function(e){var n=null;if(null!==e){if(n=e.bindings[0],"string"==typeof t)return n.serviceIdentifier===t;var r=e.bindings[0].implementationType;return t===r}return!1}},ci=function(){function t(t){this._binding=t}return t.prototype.when=function(t){return this._binding.constraint=t,new ui(this._binding)},t.prototype.whenTargetNamed=function(t){return this._binding.constraint=si(t),new ui(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){return null!==t&&(null!==t.target&&!t.target.isNamed()&&!t.target.isTagged())},new ui(this._binding)},t.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=ii(t)(e),new ui(this._binding)},t.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return null!==e&&ai(t)(e.parentRequest)},new ui(this._binding)},t.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return null!==e&&si(t)(e.parentRequest)},new ui(this._binding)},t.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(n){return null!==n&&ii(t)(e)(n.parentRequest)},new ui(this._binding)},t.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return null!==e&&oi(e,ai(t))},new ui(this._binding)},t.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return null!==e&&!oi(e,ai(t))},new ui(this._binding)},t.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return null!==e&&oi(e,si(t))},new ui(this._binding)},t.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return null!==e&&!oi(e,si(t))},new ui(this._binding)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(n){return null!==n&&oi(n,ii(t)(e))},new ui(this._binding)},t.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(n){return null!==n&&!oi(n,ii(t)(e))},new ui(this._binding)},t.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return null!==e&&oi(e,t)},new ui(this._binding)},t.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return null!==e&&!oi(e,t)},new ui(this._binding)},t}(),ui=function(){function t(t){this._binding=t}return t.prototype.onActivation=function(t){return this._binding.onActivation=t,new ci(this._binding)},t.prototype.onDeactivation=function(t){return this._binding.onDeactivation=t,new ci(this._binding)},t}(),li=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new ci(this._binding),this._bindingOnSyntax=new ui(this._binding)}return t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t.prototype.onDeactivation=function(t){return this._bindingOnSyntax.onDeactivation(t)},t}(),hi=function(){function t(t){this._binding=t}return t.prototype.inRequestScope=function(){return this._binding.scope=Rr.Request,new li(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=Rr.Singleton,new li(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=Rr.Transient,new li(this._binding)},t}(),fi=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new ci(this._binding),this._bindingOnSyntax=new ui(this._binding),this._bindingInSyntax=new hi(t)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t.prototype.onDeactivation=function(t){return this._bindingOnSyntax.onDeactivation(t)},t}(),pi=function(){function t(t){this._binding=t}return t.prototype.to=function(t){return this._binding.type=Ir.Instance,this._binding.implementationType=t,new fi(this._binding)},t.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error("The toSelf function can only be applied when a constructor is used as service identifier");var t=this._binding.serviceIdentifier;return this.to(t)},t.prototype.toConstantValue=function(t){return this._binding.type=Ir.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=Rr.Singleton,new li(this._binding)},t.prototype.toDynamicValue=function(t){return this._binding.type=Ir.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new fi(this._binding)},t.prototype.toConstructor=function(t){return this._binding.type=Ir.Constructor,this._binding.implementationType=t,this._binding.scope=Rr.Singleton,new li(this._binding)},t.prototype.toFactory=function(t){return this._binding.type=Ir.Factory,this._binding.factory=t,this._binding.scope=Rr.Singleton,new li(this._binding)},t.prototype.toFunction=function(t){if("function"!=typeof t)throw new Error("Value provided to function binding must be a function!");var e=this.toConstantValue(t);return this._binding.type=Ir.Function,this._binding.scope=Rr.Singleton,e},t.prototype.toAutoFactory=function(t){return this._binding.type=Ir.Factory,this._binding.factory=function(e){return function(){return e.container.get(t)}},this._binding.scope=Rr.Singleton,new li(this._binding)},t.prototype.toAutoNamedFactory=function(t){return this._binding.type=Ir.Factory,this._binding.factory=function(e){return function(n){return e.container.getNamed(t,n)}},new li(this._binding)},t.prototype.toProvider=function(t){return this._binding.type=Ir.Provider,this._binding.provider=t,this._binding.scope=Rr.Singleton,new li(this._binding)},t.prototype.toService=function(t){this.toDynamicValue((function(e){return e.container.get(t)}))},t}(),di=function(){function t(){}return t.of=function(e,n,r,o,i){var s=new t;return s.bindings=e,s.middleware=n,s.deactivations=o,s.activations=r,s.moduleActivationStore=i,s},t}();var gi=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(t,e){if(null==t)throw new Error($r);if(null==e)throw new Error($r);var n=this._map.get(t);void 0!==n?n.push(e):this._map.set(t,[e])},t.prototype.get=function(t){if(null==t)throw new Error($r);var e=this._map.get(t);if(void 0!==e)return e;throw new Error(Dr)},t.prototype.remove=function(t){if(null==t)throw new Error($r);if(!this._map.delete(t))throw new Error(Dr)},t.prototype.removeIntersection=function(t){var e=this;this.traverse((function(n,r){var o=t.hasKey(n)?t.get(n):void 0;if(void 0!==o){var i=r.filter((function(t){return!o.some((function(e){return t===e}))}));e._setValue(n,i)}}))},t.prototype.removeByCondition=function(t){var e=this,n=[];return this._map.forEach((function(r,o){for(var i=[],s=0,a=r;s<a.length;s++){var c=a[s];t(c)?n.push(c):i.push(c)}e._setValue(o,i)})),n},t.prototype.hasKey=function(t){if(null==t)throw new Error($r);return this._map.has(t)},t.prototype.clone=function(){var e=new t;return this._map.forEach((function(t,n){t.forEach((function(t){return e.add(n,"object"==typeof(r=t)&&null!==r&&"clone"in r&&"function"==typeof r.clone?t.clone():t);var r}))})),e},t.prototype.traverse=function(t){this._map.forEach((function(e,n){t(n,e)}))},t.prototype._setValue=function(t,e){e.length>0?this._map.set(t,e):this._map.delete(t)},t}(),yi=function(){function t(){this._map=new Map}return t.prototype.remove=function(t){if(this._map.has(t)){var e=this._map.get(t);return this._map.delete(t),e}return this._getEmptyHandlersStore()},t.prototype.addDeactivation=function(t,e,n){this._getModuleActivationHandlers(t).onDeactivations.add(e,n)},t.prototype.addActivation=function(t,e,n){this._getModuleActivationHandlers(t).onActivations.add(e,n)},t.prototype.clone=function(){var e=new t;return this._map.forEach((function(t,n){e._map.set(n,{onActivations:t.onActivations.clone(),onDeactivations:t.onDeactivations.clone()})})),e},t.prototype._getModuleActivationHandlers=function(t){var e=this._map.get(t);return void 0===e&&(e=this._getEmptyHandlersStore(),this._map.set(t,e)),e},t.prototype._getEmptyHandlersStore=function(){return{onActivations:new gi,onDeactivations:new gi}},t}(),mi=globalThis&&globalThis.__assign||function(){return mi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},mi.apply(this,arguments)},vi=globalThis&&globalThis.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(z){i(z)}}function a(t){try{c(r.throw(t))}catch(z){i(z)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))},wi=globalThis&&globalThis.__generator||function(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(z){i=[6,z],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},bi=globalThis&&globalThis.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},Ei=function(){function t(t){var e=t||{};if("object"!=typeof e)throw new Error(""+Kr);if(void 0===e.defaultScope)e.defaultScope=Rr.Transient;else if(e.defaultScope!==Rr.Singleton&&e.defaultScope!==Rr.Transient&&e.defaultScope!==Rr.Request)throw new Error(""+zr);if(void 0===e.autoBindInjectable)e.autoBindInjectable=!1;else if("boolean"!=typeof e.autoBindInjectable)throw new Error(""+Wr);if(void 0===e.skipBaseClassChecks)e.skipBaseClassChecks=!1;else if("boolean"!=typeof e.skipBaseClassChecks)throw new Error(""+Hr);this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope,skipBaseClassChecks:e.skipBaseClassChecks},this.id=Lr(),this._bindingDictionary=new gi,this._snapshots=[],this._middleware=null,this._activations=new gi,this._deactivations=new gi,this.parent=null,this._metadataReader=new Qr,this._moduleActivationStore=new yi}return t.merge=function(e,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var i=new t,s=bi([e,n],r,!0).map((function(t){return _o(t)})),a=_o(i);return s.forEach((function(t){var e;e=a,t.traverse((function(t,n){n.forEach((function(t){e.add(t.serviceIdentifier,t.clone())}))}))})),i},t.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),r=0,o=t;r<o.length;r++){var i=o[r],s=n(i.id);i.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction,s.unbindAsyncFunction,s.onActivationFunction,s.onDeactivationFunction)}},t.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return vi(this,void 0,void 0,(function(){var e,n,r,o,i;return wi(this,(function(s){switch(s.label){case 0:e=this._getContainerModuleHelpersFactory(),n=0,r=t,s.label=1;case 1:return n<r.length?(o=r[n],i=e(o.id),[4,o.registry(i.bindFunction,i.unbindFunction,i.isboundFunction,i.rebindFunction,i.unbindAsyncFunction,i.onActivationFunction,i.onDeactivationFunction)]):[3,4];case 2:s.sent(),s.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},t.prototype.unload=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach((function(e){var n=t._removeModuleBindings(e.id);t._deactivateSingletons(n),t._removeModuleHandlers(e.id)}))},t.prototype.unloadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return vi(this,void 0,void 0,(function(){var e,n,r,o;return wi(this,(function(i){switch(i.label){case 0:e=0,n=t,i.label=1;case 1:return e<n.length?(r=n[e],o=this._removeModuleBindings(r.id),[4,this._deactivateSingletonsAsync(o)]):[3,4];case 2:i.sent(),this._removeModuleHandlers(r.id),i.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))},t.prototype.bind=function(t){var e=this.options.defaultScope||Rr.Transient,n=new xr(t,e);return this._bindingDictionary.add(t,n),new pi(n)},t.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},t.prototype.rebindAsync=function(t){return vi(this,void 0,void 0,(function(){return wi(this,(function(e){switch(e.label){case 0:return[4,this.unbindAsync(t)];case 1:return e.sent(),[2,this.bind(t)]}}))}))},t.prototype.unbind=function(t){if(this._bindingDictionary.hasKey(t)){var e=this._bindingDictionary.get(t);this._deactivateSingletons(e)}this._removeServiceFromDictionary(t)},t.prototype.unbindAsync=function(t){return vi(this,void 0,void 0,(function(){var e;return wi(this,(function(n){switch(n.label){case 0:return this._bindingDictionary.hasKey(t)?(e=this._bindingDictionary.get(t),[4,this._deactivateSingletonsAsync(e)]):[3,2];case 1:n.sent(),n.label=2;case 2:return this._removeServiceFromDictionary(t),[2]}}))}))},t.prototype.unbindAll=function(){var t=this;this._bindingDictionary.traverse((function(e,n){t._deactivateSingletons(n)})),this._bindingDictionary=new gi},t.prototype.unbindAllAsync=function(){return vi(this,void 0,void 0,(function(){var t,e=this;return wi(this,(function(n){switch(n.label){case 0:return t=[],this._bindingDictionary.traverse((function(n,r){t.push(e._deactivateSingletonsAsync(r))})),[4,Promise.all(t)];case 1:return n.sent(),this._bindingDictionary=new gi,[2]}}))}))},t.prototype.onActivation=function(t,e){this._activations.add(t,e)},t.prototype.onDeactivation=function(t,e){this._deactivations.add(t,e)},t.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},t.prototype.isCurrentBound=function(t){return this._bindingDictionary.hasKey(t)},t.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,dr,e)},t.prototype.isBoundTagged=function(t,e,n){var r=!1;if(this._bindingDictionary.hasKey(t)){var o=this._bindingDictionary.get(t),i=function(t,e,n,r){var o=new fo(Nr.Variable,"",e,new co(n,r)),i=new ao(t);return new Eo(e,i,null,[],o)}(this,t,e,n);r=o.some((function(t){return t.constraint(i)}))}return!r&&this.parent&&(r=this.parent.isBoundTagged(t,e,n)),r},t.prototype.snapshot=function(){this._snapshots.push(di.of(this._bindingDictionary.clone(),this._middleware,this._activations.clone(),this._deactivations.clone(),this._moduleActivationStore.clone()))},t.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error("No snapshot available to restore.");this._bindingDictionary=t.bindings,this._activations=t.activations,this._deactivations=t.deactivations,this._middleware=t.middleware,this._moduleActivationStore=t.moduleActivationStore},t.prototype.createChild=function(e){var n=new t(e||this.options);return n.parent=this,n},t.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce((function(t,e){return e(t)}),n)},t.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},t.prototype.get=function(t){var e=this._getNotAllArgs(t,!1);return this._getButThrowIfAsync(e)},t.prototype.getAsync=function(t){return vi(this,void 0,void 0,(function(){var e;return wi(this,(function(n){return e=this._getNotAllArgs(t,!1),[2,this._get(e)]}))}))},t.prototype.getTagged=function(t,e,n){var r=this._getNotAllArgs(t,!1,e,n);return this._getButThrowIfAsync(r)},t.prototype.getTaggedAsync=function(t,e,n){return vi(this,void 0,void 0,(function(){var r;return wi(this,(function(o){return r=this._getNotAllArgs(t,!1,e,n),[2,this._get(r)]}))}))},t.prototype.getNamed=function(t,e){return this.getTagged(t,dr,e)},t.prototype.getNamedAsync=function(t,e){return this.getTaggedAsync(t,dr,e)},t.prototype.getAll=function(t){var e=this._getAllArgs(t);return this._getButThrowIfAsync(e)},t.prototype.getAllAsync=function(t){var e=this._getAllArgs(t);return this._getAll(e)},t.prototype.getAllTagged=function(t,e,n){var r=this._getNotAllArgs(t,!0,e,n);return this._getButThrowIfAsync(r)},t.prototype.getAllTaggedAsync=function(t,e,n){var r=this._getNotAllArgs(t,!0,e,n);return this._getAll(r)},t.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,dr,e)},t.prototype.getAllNamedAsync=function(t,e){return this.getAllTaggedAsync(t,dr,e)},t.prototype.resolve=function(t){var e=this.isBound(t);e||this.bind(t).toSelf();var n=this.get(t);return e||this.unbind(t),n},t.prototype._preDestroy=function(t,e){if(Reflect.hasMetadata(Tr,t))return e[Reflect.getMetadata(Tr,t).value]()},t.prototype._removeModuleHandlers=function(t){var e=this._moduleActivationStore.remove(t);this._activations.removeIntersection(e.onActivations),this._deactivations.removeIntersection(e.onDeactivations)},t.prototype._removeModuleBindings=function(t){return this._bindingDictionary.removeByCondition((function(e){return e.moduleId===t}))},t.prototype._deactivate=function(t,e){var n=this,r=Object.getPrototypeOf(e).constructor;try{if(this._deactivations.hasKey(t.serviceIdentifier)){var o=this._deactivateContainer(e,this._deactivations.get(t.serviceIdentifier).values());if(Ro(o))return this._handleDeactivationError(o.then((function(){return n._propagateContainerDeactivationThenBindingAndPreDestroyAsync(t,e,r)})),r)}var i=this._propagateContainerDeactivationThenBindingAndPreDestroy(t,e,r);if(Ro(i))return this._handleDeactivationError(i,r)}catch(s){throw new Error(Yr(r.name,s.message))}},t.prototype._handleDeactivationError=function(t,e){return vi(this,void 0,void 0,(function(){var n;return wi(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,t];case 1:return r.sent(),[3,3];case 2:throw n=r.sent(),new Error(Yr(e.name,n.message));case 3:return[2]}}))}))},t.prototype._deactivateContainer=function(t,e){for(var n=this,r=e.next();r.value;){var o=r.value(t);if(Ro(o))return o.then((function(){return n._deactivateContainerAsync(t,e)}));r=e.next()}},t.prototype._deactivateContainerAsync=function(t,e){return vi(this,void 0,void 0,(function(){var n;return wi(this,(function(r){switch(r.label){case 0:n=e.next(),r.label=1;case 1:return n.value?[4,n.value(t)]:[3,3];case 2:return r.sent(),n=e.next(),[3,1];case 3:return[2]}}))}))},t.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(t,e){t._binding.moduleId=e},n=function(n){return function(r){var o=t.rebind(r);return e(o,n),o}},r=function(e){return function(n,r){t._moduleActivationStore.addActivation(e,n,r),t.onActivation(n,r)}},o=function(e){return function(n,r){t._moduleActivationStore.addDeactivation(e,n,r),t.onDeactivation(n,r)}};return function(i){return{bindFunction:(s=i,function(n){var r=t.bind(n);return e(r,s),r}),isboundFunction:function(e){return t.isBound(e)},onActivationFunction:r(i),onDeactivationFunction:o(i),rebindFunction:n(i),unbindFunction:function(e){return t.unbind(e)},unbindAsyncFunction:function(e){return t.unbindAsync(e)}};var s}},t.prototype._getAll=function(t){return Promise.all(this._get(t))},t.prototype._get=function(t){var e=mi(mi({},t),{contextInterceptor:function(t){return t},targetType:Nr.Variable});if(this._middleware){var n=this._middleware(e);if(null==n)throw new Error("Invalid return type in middleware. Middleware must return!");return n}return this._planAndResolve()(e)},t.prototype._getButThrowIfAsync=function(t){var e=this._get(t);if(Io(e))throw new Error("You are attempting to construct '"+t.serviceIdentifier+"' in a synchronous way\n but it has asynchronous dependencies.");return e},t.prototype._getAllArgs=function(t){return{avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:t}},t.prototype._getNotAllArgs=function(t,e,n,r){return{avoidConstraints:!1,isMultiInject:e,serviceIdentifier:t,key:n,value:r}},t.prototype._planAndResolve=function(){var t=this;return function(e){var n=Oo(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);return function(t){return Wo(t.plan.rootRequest.requestScope)(t.plan.rootRequest)}(n=e.contextInterceptor(n))}},t.prototype._deactivateIfSingleton=function(t){var e=this;if(t.activated)return Ro(t.cache)?t.cache.then((function(n){return e._deactivate(t,n)})):this._deactivate(t,t.cache)},t.prototype._deactivateSingletons=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(Ro(this._deactivateIfSingleton(r)))throw new Error("Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)")}},t.prototype._deactivateSingletonsAsync=function(t){return vi(this,void 0,void 0,(function(){var e=this;return wi(this,(function(n){switch(n.label){case 0:return[4,Promise.all(t.map((function(t){return e._deactivateIfSingleton(t)})))];case 1:return n.sent(),[2]}}))}))},t.prototype._propagateContainerDeactivationThenBindingAndPreDestroy=function(t,e,n){return this.parent?this._deactivate.bind(this.parent)(t,e):this._bindingDeactivationAndPreDestroy(t,e,n)},t.prototype._propagateContainerDeactivationThenBindingAndPreDestroyAsync=function(t,e,n){return vi(this,void 0,void 0,(function(){return wi(this,(function(r){switch(r.label){case 0:return this.parent?[4,this._deactivate.bind(this.parent)(t,e)]:[3,2];case 1:return r.sent(),[3,4];case 2:return[4,this._bindingDeactivationAndPreDestroyAsync(t,e,n)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))},t.prototype._removeServiceFromDictionary=function(t){try{this._bindingDictionary.remove(t)}catch(z){throw new Error("Could not unbind serviceIdentifier: "+no(t))}},t.prototype._bindingDeactivationAndPreDestroy=function(t,e,n){var r=this;if("function"==typeof t.onDeactivation){var o=t.onDeactivation(e);if(Ro(o))return o.then((function(){return r._preDestroy(n,e)}))}return this._preDestroy(n,e)},t.prototype._bindingDeactivationAndPreDestroyAsync=function(t,e,n){return vi(this,void 0,void 0,(function(){return wi(this,(function(r){switch(r.label){case 0:return"function"!=typeof t.onDeactivation?[3,2]:[4,t.onDeactivation(e)];case 1:r.sent(),r.label=2;case 2:return[4,this._preDestroy(n,e)];case 3:return r.sent(),[2]}}))}))},t}();function _i(t,e,n,r){!function(t){if(void 0!==t)throw new Error(qr)}(e),Si(br,t,n.toString(),r)}function Ai(t){var e=[];if(Array.isArray(t)){var n=function(t){for(var e=new Set,n=0,r=t;n<r.length;n++){var o=r[n];if(e.has(o))return o;e.add(o)}}((e=t).map((function(t){return t.key})));if(void 0!==n)throw new Error(Pr+" "+n.toString())}else e=[t];return e}function Si(t,e,n,r){var o=Ai(r),i={};Reflect.hasOwnMetadata(t,e)&&(i=Reflect.getMetadata(t,e));var s=i[n];if(void 0===s)s=[];else for(var a=function(t){if(o.some((function(e){return e.key===t.key})))throw new Error(Pr+" "+t.key.toString())},c=0,u=s;c<u.length;c++){a(u[c])}s.push.apply(s,o),i[n]=s,Reflect.defineMetadata(t,i,e)}function Ti(t){return function(e,n,r){"number"==typeof r?_i(e,n,r,t):function(t,e,n){if(void 0!==t.prototype)throw new Error(qr);Si(Er,t.constructor,e,n)}(e,n,t)}}function Oi(){return function(t){if(Reflect.hasOwnMetadata(_r,t))throw new Error(Cr);var e=Reflect.getMetadata(Ar,t)||[];return Reflect.defineMetadata(_r,e,t),t}}var Ri,Ii=(Ri=vr,function(t){return function(e,n,r){if(void 0===t){var o="function"==typeof e?e.name:e.constructor.name;throw new Error(Ur(o))}return Ti(new co(Ri,t))(e,n,r)}}),Ni=Object.defineProperty,ki=Object.getOwnPropertyDescriptor;let Li=class{constructor(){this.eventListeners={}}destroy(){delete this.eventListeners}on(t,e){return this.eventListeners[t]||(this.eventListeners[t]=[]),this.eventListeners[t].push(e),()=>this.off(t,e)}off(t,e){if(e){for(let n=0;n<this.eventListeners[t].length;n++)if(this.eventListeners[t][n]===e)return void this.eventListeners[t].splice(n,1)}else delete this.eventListeners[t]}emit(t,...e){this.eventListeners[t]&&this.eventListeners[t].forEach((t=>{t(...e)}))}};Li=((t,e,n,r)=>{for(var o,i=r>1?void 0:r?ki(e,n):e,s=t.length-1;s>=0;s--)(o=t[s])&&(i=(r?o(e,n,i):o(i))||i);return r&&i&&Ni(e,n,i),i})([Oi()],Li);var xi=Object.defineProperty,Ci=Object.getOwnPropertyDescriptor;let Pi=class{constructor(t){this.commandList=[],this.shortcut=t}registerCommand(t){return this.commandList.some((e=>{e.plugin===t.plugin&&(e.command,t.command)}))?new class{constructor(t){this.message=t}}("Command is already registered, do not register command repeatly"):t.shortcut&&this.commandList.some((e=>{e.shortcut,t.shortcut}))?new er("shortcut has already registered"):(this.commandList.push(t),this.shortcut.registerKeyboardEventFromPlugin(t),void Qn(`Register plugin: ${t.plugin} command: ${t.command}`))}unregisterCommandByPlugin(t){for(let e=0;e<this.commandList.length;e++)if(t===this.commandList[e].plugin){const n=this.commandList[e];Qn(`Unregister plugin: ${t} command: ${n.command}`),this.commandList.splice(e,1),n.shortcut&&this.shortcut.unregisterKeyboardEvent(n.shortcut)}}unregisterCommand(t){for(let e=0;e<this.commandList.length;e++)if(t.command===this.commandList[e].command&&t.plugin===this.commandList[e].plugin){this.commandList.splice(e,1);break}this.shortcut.registerKeyboardEventFromPlugin(t)}getCommands(){return this.commandList}};var $i,Di;Pi=((t,e,n,r)=>{for(var o,i=r>1?void 0:r?Ci(e,n):e,s=t.length-1;s>=0;s--)(o=t[s])&&(i=(r?o(e,n,i):o(i))||i);return r&&i&&xi(e,n,i),i})([Oi(),($i=0,Di=Ii(q),(t,e)=>Di(t,e,$i))],Pi);var ji="undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function Fi(t,e,n,r){t.addEventListener?t.addEventListener(e,n,r):t.attachEvent&&t.attachEvent("on".concat(e),(function(){n(window.event)}))}function Mi(t,e){for(var n=e.slice(0,e.length-1),r=0;r<n.length;r++)n[r]=t[n[r].toLowerCase()];return n}function Bi(t){"string"!=typeof t&&(t="");for(var e=(t=t.replace(/\s/g,"")).split(","),n=e.lastIndexOf("");n>=0;)e[n-1]+=",",e.splice(n,1),n=e.lastIndexOf("");return e}for(var Ui={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":ji?173:189,"=":ji?61:187,";":ji?59:186,"'":222,"[":219,"]":221,"\\":220},Gi={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},qi={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},Vi={16:!1,18:!1,17:!1,91:!1},Ki={},zi=1;zi<20;zi++)Ui["f".concat(zi)]=111+zi;var Wi=[],Hi=!1,Xi="all",Ji=[],Yi=function(t){return Ui[t.toLowerCase()]||Gi[t.toLowerCase()]||t.toUpperCase().charCodeAt(0)},Zi=function(t){return Object.keys(Ui).find((function(e){return Ui[e]===t}))},Qi=function(t){return Object.keys(Gi).find((function(e){return Gi[e]===t}))};function ts(t){Xi=t||"all"}function es(){return Xi||"all"}var ns=function(t){var e=t.key,n=t.scope,r=t.method,o=t.splitKey,i=void 0===o?"+":o;Bi(e).forEach((function(t){var e=t.split(i),o=e.length,s=e[o-1],a="*"===s?"*":Yi(s);if(Ki[a]){n||(n=es());var c=o>1?Mi(Gi,e):[];Ki[a]=Ki[a].filter((function(t){return!((!r||t.method===r)&&t.scope===n&&function(t,e){for(var n=t.length>=e.length?t:e,r=t.length>=e.length?e:t,o=!0,i=0;i<n.length;i++)-1===r.indexOf(n[i])&&(o=!1);return o}(t.mods,c))}))}}))};function rs(t,e,n,r){var o;if(e.element===r&&(e.scope===n||"all"===e.scope)){for(var i in o=e.mods.length>0,Vi)Object.prototype.hasOwnProperty.call(Vi,i)&&(!Vi[i]&&e.mods.indexOf(+i)>-1||Vi[i]&&-1===e.mods.indexOf(+i))&&(o=!1);(0!==e.mods.length||Vi[16]||Vi[18]||Vi[17]||Vi[91])&&!o&&"*"!==e.shortcut||!1===e.method(t,e)&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}function os(t,e){var n=Ki["*"],r=t.keyCode||t.which||t.charCode;if(is.filter.call(this,t)){if(93!==r&&224!==r||(r=91),-1===Wi.indexOf(r)&&229!==r&&Wi.push(r),["ctrlKey","altKey","shiftKey","metaKey"].forEach((function(e){var n=qi[e];t[e]&&-1===Wi.indexOf(n)?Wi.push(n):!t[e]&&Wi.indexOf(n)>-1?Wi.splice(Wi.indexOf(n),1):"metaKey"===e&&t[e]&&3===Wi.length&&(t.ctrlKey||t.shiftKey||t.altKey||(Wi=Wi.slice(Wi.indexOf(n))))})),r in Vi){for(var o in Vi[r]=!0,Gi)Gi[o]===r&&(is[o]=!0);if(!n)return}for(var i in Vi)Object.prototype.hasOwnProperty.call(Vi,i)&&(Vi[i]=t[qi[i]]);t.getModifierState&&(!t.altKey||t.ctrlKey)&&t.getModifierState("AltGraph")&&(-1===Wi.indexOf(17)&&Wi.push(17),-1===Wi.indexOf(18)&&Wi.push(18),Vi[17]=!0,Vi[18]=!0);var s=es();if(n)for(var a=0;a<n.length;a++)n[a].scope===s&&("keydown"===t.type&&n[a].keydown||"keyup"===t.type&&n[a].keyup)&&rs(t,n[a],s,e);if(r in Ki)for(var c=0;c<Ki[r].length;c++)if(("keydown"===t.type&&Ki[r][c].keydown||"keyup"===t.type&&Ki[r][c].keyup)&&Ki[r][c].key){for(var u=Ki[r][c],l=u.splitKey,h=u.key.split(l),f=[],p=0;p<h.length;p++)f.push(Yi(h[p]));f.sort().join("")===Wi.sort().join("")&&rs(t,u,s,e)}}}function is(t,e,n){Wi=[];var r=Bi(t),o=[],i="all",s=document,a=0,c=!1,u=!0,l="+",h=!1;for(void 0===n&&"function"==typeof e&&(n=e),"[object Object]"===Object.prototype.toString.call(e)&&(e.scope&&(i=e.scope),e.element&&(s=e.element),e.keyup&&(c=e.keyup),void 0!==e.keydown&&(u=e.keydown),void 0!==e.capture&&(h=e.capture),"string"==typeof e.splitKey&&(l=e.splitKey)),"string"==typeof e&&(i=e);a<r.length;a++)o=[],(t=r[a].split(l)).length>1&&(o=Mi(Gi,t)),(t="*"===(t=t[t.length-1])?"*":Yi(t))in Ki||(Ki[t]=[]),Ki[t].push({keyup:c,keydown:u,scope:i,mods:o,shortcut:r[a],method:n,key:r[a],splitKey:l,element:s});void 0!==s&&!function(t){return Ji.indexOf(t)>-1}(s)&&window&&(Ji.push(s),Fi(s,"keydown",(function(t){os(t,s)}),h),Hi||(Hi=!0,Fi(window,"focus",(function(){Wi=[]}),h)),Fi(s,"keyup",(function(t){os(t,s),function(t){var e=t.keyCode||t.which||t.charCode,n=Wi.indexOf(e);if(n>=0&&Wi.splice(n,1),t.key&&"meta"===t.key.toLowerCase()&&Wi.splice(0,Wi.length),93!==e&&224!==e||(e=91),e in Vi)for(var r in Vi[e]=!1,Gi)Gi[r]===e&&(is[r]=!1)}(t)}),h))}var ss={getPressedKeyString:function(){return Wi.map((function(t){return Zi(t)||Qi(t)||String.fromCharCode(t)}))},setScope:ts,getScope:es,deleteScope:function(t,e){var n,r;for(var o in t||(t=es()),Ki)if(Object.prototype.hasOwnProperty.call(Ki,o))for(n=Ki[o],r=0;r<n.length;)n[r].scope===t?n.splice(r,1):r++;es()===t&&ts(e||"all")},getPressedKeyCodes:function(){return Wi.slice(0)},isPressed:function(t){return"string"==typeof t&&(t=Yi(t)),-1!==Wi.indexOf(t)},filter:function(t){var e=t.target||t.srcElement,n=e.tagName,r=!0;return!e.isContentEditable&&("INPUT"!==n&&"TEXTAREA"!==n&&"SELECT"!==n||e.readOnly)||(r=!1),r},trigger:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";Object.keys(Ki).forEach((function(n){Ki[n].filter((function(n){return n.scope===e&&n.shortcut===t})).forEach((function(t){t&&t.method&&t.method()}))}))},unbind:function(t){if(void 0===t)Object.keys(Ki).forEach((function(t){return delete Ki[t]}));else if(Array.isArray(t))t.forEach((function(t){t.key&&ns(t)}));else if("object"==typeof t)t.key&&ns(t);else if("string"==typeof t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var o=n[0],i=n[1];"function"==typeof o&&(i=o,o=""),ns({key:t,scope:o,method:i,splitKey:"+"})}},keyMap:Ui,modifier:Gi,modifierMap:qi};for(var as in ss)Object.prototype.hasOwnProperty.call(ss,as)&&(is[as]=ss[as]);if("undefined"!=typeof window){var cs=window.hotkeys;is.noConflict=function(t){return t&&window.hotkeys===is&&(window.hotkeys=cs),is},window.hotkeys=is}var us=Object.defineProperty,ls=Object.getOwnPropertyDescriptor;is.filter=function(){return!0};let hs=class{constructor(t){this.option={capture:!0},Qn("Initialize shortcut subsystem"),this.eventBus=t}registerKeyboardEvent(t,e){is(t,this.option,e),this.eventBus.on(t.toString(),e)}unregisterKeyboardEvent(t){is.unbind(t),this.eventBus.off(t.toString())}registerKeyboardEventFromPlugin(t){t.shortcut&&t.callback&&this.registerKeyboardEvent(t.shortcut,t.callback)}unregisterKeyboardEventFromPlugin(t){t.shortcut&&t.callback&&this.unregisterKeyboardEvent(t.shortcut)}};hs=((t,e,n,r)=>{for(var o,i=r>1?void 0:r?ls(e,n):e,s=t.length-1;s>=0;s--)(o=t[s])&&(i=(r?o(e,n,i):o(i))||i);return r&&i&&us(e,n,i),i})([Oi(),((t,e)=>(n,r)=>e(n,r,t))(0,Ii(G))],hs);const fs=new Ei;fs.bind(G).to(Li),fs.bind(q).to(hs).inSingletonScope(),fs.bind(V).to(Pi).inSingletonScope();const ps={clientApi:hr,serverApi:lr,Menu:class{constructor(t){var e,n;const r=null==(n=null==(e=window.siyuan)?void 0:e.menus)?void 0:n.menu;if(!r)throw Error("Siyuan internal menu not found!");if(this.menu=r,!t)throw Error("Menu must has an id, got empty or undefined!");r.remove(),r.element.setAttribute("data-name",t)}addItem(t){return this.menu.append(t.element),this}addSeparator(){return this.addItem(new fr({type:"separator"})),this}showAtMouseEvent(t){return this.menu.popup({x:t.clientX,y:t.clientY}),this}showAtPosition(t){return this.menu.popup({x:t.x,y:t.y}),this}close(){this.menu.remove()}},MenuItem:fr,MenuSeparator:class{},Notification:class{constructor(t){this.option=t}show(){"error"===this.option.type?ur(null,this.option.message,this.option.timeout):cr(null,this.option.message,this.option.timeout)}},Dialog:pr,container:fs};function ds(t,e,n){const r=t.slice();return r[11]=e[n],r[13]=n,r}function gs(t){let e,n=t[2],r=[];for(let o=0;o<n.length;o+=1)r[o]=ms(ds(t,n,o));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=y("")},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);f(t,e,n)},p(t,o){if(22&o){let i;for(n=t[2],i=0;i<n.length;i+=1){const s=ds(t,n,i);r[i]?r[i].p(s,o):(r[i]=ms(s),r[i].c(),r[i].m(e.parentNode,e))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},d(t){!function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(r,t),t&&p(e)}}}function ys(t){let e,n,r,o,i=rr("shortcut")+"",s=t[11].shortcut+"";return{c(){e=d("div"),n=y(i),r=y(": "),o=y(s),w(e,"class","command-shortcut svelte-1bq7axd")},m(t,i){f(t,e,i),h(e,n),h(e,r),h(e,o)},p(t,e){4&e&&s!==(s=t[11].shortcut+"")&&b(o,s)},d(t){t&&p(e)}}}function ms(t){let e,n,r,o,i,s,a,c,u,g,E,_,A,S,T,O=t[11].pluginName+"",R=t[11].command+"",I=(t[11].description||"")+"",N=t[11].shortcut&&ys(t);function k(){return t[7](t[13])}return{c(){e=d("div"),n=d("span"),r=y(O),o=m(),i=y(":"),s=m(),a=d("span"),c=y(R),u=m(),g=y(I),E=m(),N&&N.c(),_=m(),w(n,"class","command-plugin svelte-1bq7axd"),w(a,"class","command-description"),w(e,"class",A=l(t[13]===t[1]?"command-selected command":"command")+" svelte-1bq7axd")},m(t,l){f(t,e,l),h(e,n),h(n,r),h(n,o),h(n,i),h(e,s),h(e,a),h(a,c),h(a,u),h(a,g),h(e,E),N&&N.m(e,null),h(e,_),S||(T=v(e,"click",k),S=!0)},p(n,o){t=n,4&o&&O!==(O=t[11].pluginName+"")&&b(r,O),4&o&&R!==(R=t[11].command+"")&&b(c,R),4&o&&I!==(I=(t[11].description||"")+"")&&b(g,I),t[11].shortcut?N?N.p(t,o):(N=ys(t),N.c(),N.m(e,_)):N&&(N.d(1),N=null),2&o&&A!==(A=l(t[13]===t[1]?"command-selected command":"command")+" svelte-1bq7axd")&&w(e,"class",A)},d(t){t&&p(e),N&&N.d(),S=!1,T()}}}function vs(t){let e,n,r,i,s,c,u,l,y,b=t[2]&&gs(t);return{c(){e=d("div"),n=d("div"),r=g("svg"),i=g("path"),s=m(),c=d("input"),u=m(),b&&b.c(),w(i,"d","M64 112v800h896V112H64z m846 750H114V162h796v700zM234.6 688.8L411.3 512 234.6 335.2l35.4-35.4L482.1 512 269.9 724.1l-35.3-35.3z m554.8-10.2h-300v-50h300v50z"),_(r,"left","14px"),w(r,"class","b3-form__icon-icon"),w(r,"viewBox","0 0 1024 1024"),w(r,"version","1.1"),w(r,"xmlns","http://www.w3.org/2000/svg"),w(r,"width","200"),w(r,"height","200"),w(c,"id","commandPanelInput"),w(c,"class","b3-text-field b3-text-field--text fn__block b3-form__icon-input"),w(n,"class","b3-form__icon search__header"),w(e,"class","fn__flex-column"),_(e,"border-radius","4px"),_(e,"overflow","hidden"),_(e,"position","relative"),_(e,"width","max(80vw, 1000px)")},m(o,a){f(o,e,a),h(e,n),h(n,r),h(r,i),h(n,s),h(n,c),E(c,t[0]),h(e,u),b&&b.m(e,null),l||(y=[v(c,"input",t[6]),v(c,"keydown",t[3])],l=!0)},p(t,[n]){1&n&&c.value!==t[0]&&E(c,t[0]),t[2]?b?b.p(t,n):(b=gs(t),b.c(),b.m(e,null)):b&&(b.d(1),b=null)},i:o,o:o,d(t){t&&p(e),b&&b.d(),l=!1,a(y)}}}function ws(t,e,n){const r=fs.get("CommandManager");let o=[],i="",s=0,a=[];const c=()=>{const t=a[s];pr.destroyAll(),t.callback()},u=t=>{n(1,s=t),c()},l=(t,e)=>t&&t.toLowerCase().indexOf(e.toLowerCase())>=0;T((()=>{n(5,o=r.getCommands());document.getElementById("commandPanelInput").focus()}));return t.$$.update=()=>{33&t.$$.dirty&&(n(1,s=0),n(2,a=i?o.filter((t=>l(t.plugin,i)||l(t.pluginName,i)||l(t.command,i)||l(t.description,i))):o))},[i,s,a,t=>{if(13!==t.keyCode)if(38!==t.keyCode){if(40===t.keyCode){const e=a.length;if(t.preventDefault(),s>=e-1)return;n(1,s++,s)}}else{if(t.preventDefault(),0===s)return;n(1,s--,s)}else c()},u,o,function(){i=this.value,n(0,i)},t=>u(t)]}class bs extends B{constructor(t){super(),M(this,t,ws,vs,u,{})}}const Es="undefined"==typeof window?r:window,_s=()=>{let t;const e=new Promise((e=>{t=e}));return{resolve:t,promise:e}};var As={wait:(t,e)=>{if(Es._waitList||(Es._waitList={}),Es._waitList[t]){const{promise:n}=Es._waitList[t];return e&&n.then(e),n}{const{resolve:n,promise:r}=_s();return Es._waitList[t]={promise:r,resolve:n},e&&r.then(e),r}},finish:(t,e)=>{if(Es._waitList||(Es._waitList={}),Es._waitList[t]){const{resolve:n}=Es._waitList[t];n(e)}else{const{resolve:n,promise:r}=_s();Es._waitList[t]={promise:r,resolve:n},n(e)}}};const{Plugin:Ss}=require("siyuan");module.exports=class extends Ss{onload(){const t=ps.container.get(V);As.finish("commandPanel",t),As.finish("core",{...ps,commandManager:t}),t.registerCommand({command:"Show command panel",description:rr("show_command_panel"),shortcut:"ctrl+shift+o,command+shift+o",callback:()=>{this.showPanel()},plugin:"CommandPanel",pluginName:"CommandPanel"})}showPanel(){ps.Dialog.destroyAll(),new ps.Dialog({content:'<div id="command-panel"></div>'}),setImmediate((()=>{new bs({target:document.getElementById("command-panel")})}))}onunload(){ps.container.get(V).unregisterCommand({plugin:"CommandPanel",pluginName:"CommandPanel",command:"Show command panel",description:rr("show_command_panel"),shortcut:"ctrl+shift+o,command+shift+o",callback:()=>{this.showPanel()}})}};
